<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‹ã‚“ã˜ãƒã‚¹ã‚¿ãƒ¼ãƒ»ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap');

        :root {
            --primary: #FF9800;
            --secondary: #4CAF50;
            --accent: #2196F3;
            --bg: #FFF3E0;
            --text: #5D4037;
            --shadow: 0 4px 0 rgba(0,0,0,0.2);
        }

        body {
            font-family: 'Kosugi Maru', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            text-align: center;
            user-select: none;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        /* ç”»é¢å…±é€šè¨­å®š */
        .screen {
            display: none;
            padding: 20px;
            min-height: 100vh;
            box-sizing: border-box;
            animation: fadeIn 0.3s;
        }
        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ */
        #title-screen {
            background: linear-gradient(135deg, #FF9800, #FFCC80);
            color: white;
            padding-top: 60px;
            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«é«˜ã•ã‚’åˆ¶é™ã—ãªã„ */
            padding-bottom: 50px; 
        }

        h1 {
            font-size: 2.5rem;
            margin: 0;
            text-shadow: 2px 2px 0 #E65100;
        }

        .mascot-area {
            font-size: 5rem;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .menu-btn {
            display: block;
            width: 80%;
            max-width: 300px;
            margin: 15px auto;
            padding: 15px;
            font-size: 1.5rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s, box-shadow 0.1s;
            font-family: inherit;
        }

        .menu-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .btn-practice { background: #8BC34A; color: white; }
        .btn-test { background: #FF5722; color: white; }
        
        /* å­¦å¹´é¸æŠãƒœã‚¿ãƒ³ */
        .grade-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .grade-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 3px solid white;
            background: rgba(255,255,255,0.3);
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
        }
        .grade-btn.selected {
            background: white;
            color: #FF9800;
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
        }

        /* æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ï¼ˆãƒ›ãƒ¼ãƒ ç”¨ï¼‰ */
        .home-search-box {
            margin: 20px auto;
            width: 80%;
            max-width: 300px;
            display: flex;
            gap: 5px;
        }
        .home-search-box input {
            flex: 1;
            padding: 10px;
            border-radius: 20px;
            border: 2px solid white;
            font-size: 1rem;
            text-align: center;
        }
        .home-search-box button {
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 0 15px;
            cursor: pointer;
            font-weight: bold;
        }

        /* --- è¿½åŠ ï¼šã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãƒ»æ³¨æ„æ›¸ãç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« --- */
        .footer-note, .app-credits-container {
            margin-top: 40px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border-radius: 10px;
            text-align: left;
            font-size: 0.9rem;
            width: 90%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            box-sizing: border-box;
        }
        
        .footer-note strong { color: #E65100; }

        .credit-warning-box {
            border: 2px solid #FF9800;
            background: #FFF3E0;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .credit-warning-title { font-weight: bold; margin-bottom: 5px; color: #E65100; }
        
        .credit-section-title {
            font-size: 1.1rem;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
            margin-top: 20px;
        }

        .credit-list {
            list-style: none;
            padding: 0;
        }
        .credit-item { margin-bottom: 15px; }
        .credit-name { font-weight: bold; color: #333; }
        .credit-desc { font-size: 0.8rem; color: #555; line-height: 1.4; margin-left: 10px; }
        .credit-link { color: #2196F3; }

        .license-details {
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #f1f1f1;
        }
        .license-summary {
            padding: 5px;
            cursor: pointer;
            font-size: 0.75rem;
            color: #555;
            outline: none;
        }
        .license-full-text {
            padding: 10px;
            font-size: 0.7rem;
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 200px;
            overflow-y: auto;
            background: #fff;
            color: #333;
            text-align: left;
        }
        /* ------------------------------------------- */

        /* ãƒªã‚¹ãƒˆç”»é¢ */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 10px 20px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .back-btn {
            background: #9E9E9E;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
        }

        .search-area {
            margin-bottom: 20px;
        }
        #search-box {
            width: 100%;
            max-width: 400px;
            padding: 10px;
            font-size: 1.2rem;
            border: 3px solid var(--primary);
            border-radius: 15px;
            text-align: center;
        }

        .kanji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            padding-bottom: 50px;
        }

        .kanji-card {
            background: white;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 3px 0 rgba(0,0,0,0.1);
            cursor: pointer;
            position: relative;
            border: 2px solid transparent;
            transition: transform 0.1s;
        }
        .kanji-card:active { transform: scale(0.95); }
        
        .kanji-card.cleared-practice { border-color: #8BC34A; background: #F1F8E9; }
        .kanji-card.cleared-test { border-color: #FF5722; background: #FBE9E7; }

        .mark-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            border: 2px solid white;
        }
        .cleared-practice .star-mark { background: #FFEB3B; border-radius: 50%; padding: 2px; }
        .cleared-test .crown-mark { background: #FFD700; border-radius: 50%; padding: 2px; }

        /* ç·´ç¿’ç”»é¢ */
        #practice-area {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: inline-block;
            margin-top: 20px;
            position: relative;
        }
        #character-target {
            touch-action: none; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢ */
        }

        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .control-btn {
            background: var(--accent);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 0 #1976D2;
        }
        .control-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* ãƒ¬ãƒ™ãƒ«ãƒ»çµŒé¨“å€¤ãƒãƒ¼ */
        .xp-container {
            width: 90%;
            max-width: 400px;
            height: 20px;
            background: #DDD;
            border-radius: 10px;
            margin: 10px auto;
            overflow: hidden;
            position: relative;
        }
        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* çµæœã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
            flex-direction: column;
            color: white;
        }
        .overlay.active { display: flex; animation: popIn 0.3s; }
        
        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .result-content {
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            width: 80%;
            max-width: 300px;
        }
        .big-icon { font-size: 5rem; margin: 10px 0; }
        .next-btn {
            background: #FF9800;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ç‰¹åˆ¥æ¼”å‡º */
        #levelup-overlay {
            background: rgba(255, 215, 0, 0.9);
        }
        .levelup-anim {
            font-size: 6rem;
            animation: spin 1s infinite linear;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>

    <div id="title-screen" class="screen active">
        <h1>ã‹ã‚“ã˜ãƒã‚¹ã‚¿ãƒ¼</h1>
        <div class="mascot-area" id="title-mascot">ğŸ¥š</div>
        <div style="font-size:1.2rem; margin-bottom:10px;">ãƒ¬ãƒ™ãƒ« <span id="title-level">1</span></div>
        
        <div class="grade-selector">
            <button class="grade-btn selected" onclick="setGrade(1)">1</button>
            <button class="grade-btn" onclick="setGrade(2)">2</button>
            <button class="grade-btn" onclick="setGrade(3)">3</button>
            <button class="grade-btn" onclick="setGrade(4)">4</button>
            <button class="grade-btn" onclick="setGrade(5)">5</button>
            <button class="grade-btn" onclick="setGrade(6)">6</button>
        </div>

        <div class="home-search-box">
            <input type="text" id="home-search-input" placeholder="ã•ãŒã—ãŸã„ ã‹ã‚“ã˜">
            <button onclick="handleHomeSearch()">ã•ãŒã™</button>
        </div>

        <button class="menu-btn btn-practice" onclick="selectMode('practice')">âœï¸ ã‚Œã‚“ã—ã‚…ã†</button>
        <button class="menu-btn btn-test" onclick="selectMode('test')">ğŸ“ ãƒ†ã‚¹ãƒˆ</button>
        
        <div style="margin-top:20px; font-size:0.8rem; color:rgba(255,255,255,0.7);">
            <span onclick="resetData()" style="text-decoration: underline; cursor:pointer;">ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ</span>
        </div>

        <div class="footer-note">
            <strong>âš ï¸ ä¿è­·è€…ãƒ»å…ˆç”Ÿæ–¹ã¸</strong><br>
            æœ¬ã‚¢ãƒ—ãƒªã¯ã€æ•™å“¡ãŒå­¦ç¿’æ”¯æ´ã®ãŸã‚ã«è‡ªä½œã—ãŸã‚‚ã®ã§ã™ï¼ˆå¤–éƒ¨ã®æ•™æã‚µã‚¤ãƒˆCanvaã¸ãƒªãƒ³ã‚¯ã—ã¾ã™ï¼‰ã€‚<br>
            æ¼¢å­—ã®ãƒ‡ãƒ¼ã‚¿ã¯æ—¥æœ¬ã®å­¦ç¿’æŒ‡å°è¦é ˜ï¼ˆå…¨1026å­—ï¼‰ã‚’å‚ç…§ã—ã¦ã„ã¾ã™ã€‚

            <div style="margin-top: 10px; padding: 8px; background-color: #f9f9f9; border-left: 4px solid #ffcc00; font-size:0.85rem;">
                <strong>ã€åˆ¤å®šã«é–¢ã™ã‚‹ã”æ³¨æ„ã€‘</strong><br>
                ãƒ»ãƒ‡ã‚¸ã‚¿ãƒ«ã®æ¨™æº–å­—ä½“ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ä¸€éƒ¨ã®æ¼¢å­—ã§æ•™ç§‘æ›¸ã¨ç•°ãªã‚‹å½¢ï¼ˆç³¸ã¸ã‚“ã®ä¸‹ãŒã€Œä¸‰æœ¬ç‚¹ã€ã«ãªã‚‹ç­‰ï¼‰ãŒè¡¨ç¤ºãƒ»åˆ¤å®šã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>
                ãƒ»<strong>å­¦æ ¡ã§ç¿’ã£ãŸæ›¸ãæ–¹ãŒæœ€ã‚‚æ­£ã—ã„åŸºæº–ã§ã™ã€‚</strong>ã‚¢ãƒ—ãƒªã®åˆ¤å®šã¯ã‚ãã¾ã§ç›®å®‰ã¨ã—ã¦ã”æ´»ç”¨ãã ã•ã„ã€‚
            </div>
        </div>

        <div class="app-credits-container">
            <div class="credit-warning-box">
                <div class="credit-warning-title">
                    <span class="credit-warning-icon">âš ï¸</span> ç­†é †ï¼ˆæ›¸ãé †ï¼‰ã«ã¤ã„ã¦
                </div>
                <div>
                    æœ¬ã‚¢ãƒ—ãƒªã§ã¯æ—¥æœ¬ã®æ¨™æº–çš„ãªç­†é †ã‚’å„ªå…ˆã—ã¦è¡¨ç¤ºã—ã¦ã„ã¾ã™ãŒã€ä¸€éƒ¨ã®æ¼¢å­—ã§ãƒ‡ãƒ¼ã‚¿ã®éƒ½åˆä¸Šã€ä¸­å›½èªç”±æ¥ã®ç­†é †ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>
                    <strong>å­¦æ ¡ã®æ•™ç§‘æ›¸ã‚„å…ˆç”Ÿã®æŒ‡å°ã¨ç•°ãªã‚‹å ´åˆã¯ã€æ•™ç§‘æ›¸ã‚’æ­£è§£ã¨ã—ã¦ãã ã•ã„ã€‚</strong>
                </div>
            </div>

            <h3 class="credit-section-title">ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</h3>
            <ul class="credit-list">
                
                <li class="credit-item">
                    <div class="credit-name">1. æ—¥æœ¬èªæ¼¢å­—ãƒ‡ãƒ¼ã‚¿ (hanzi-writer-data-jp)</div>
                    <div class="credit-desc">
                        â€¢ Source: <a href="https://github.com/chanind/hanzi-writer-data-jp" target="_blank" class="credit-link">GitHub Repository</a><br>
                        â€¢ Derived from <strong>AnimCJK</strong> project (Copyright 2016-2019 FranÃ§ois Mizessyn)<br>
                        â€¢ Licensed under <strong>LGPL v3</strong> or later.<br>
                        â€¢ Original Glyph Data: <strong>Arphic Public License</strong> (Copyright 1999 Arphic Technology Co., Ltd.)
                        
                        <details class="license-details">
                        <summary class="license-summary">â–¶ Arphic Public License å…¨æ–‡ã‚’è¡¨ç¤º</summary>
                        <div class="license-full-text">ARPHIC PUBLIC LICENSE

Copyright (C) 1999 Arphic Technology Co., Ltd.
11Fl. No.168, Yung Chi Rd., Taipei, 110 Taiwan
All rights reserved except as specified below.

Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is forbidden.

Preamble

   The licenses for most software are designed to take away your freedom to share and change it. By contrast, the ARPHIC PUBLIC LICENSE specifically permits and encourages you to use this software, provided that you give the recipients all the rights that we gave you and make sure they can get the modifications of this software.

Legal Terms

0. Definitions:
   Throughout this License, "Font" means the TrueType fonts "AR PL Mingti2L Big5", "AR PL KaitiM Big5" (BIG-5 character set) and "AR PL SungtiL GB", "AR PL KaitiM GB" (GB character set) which are originally distributed by Arphic, and the derivatives of those fonts created through any modification including modifying glyph, reordering glyph, converting format, changing font name, or adding/deleting some characters in/from glyph table.

   "PL" means "Public License".

   "Copyright Holder" means whoever is named in the copyright or copyrights for the Font.

   "You" means the licensee, or person copying, redistributing or modifying the Font.

   "Freely Available" means that you have the freedom to copy or modify the Font as well as redistribute copies of the Font under the same conditions you received, not price. If you wish, you can charge for this service.

1. Copying & Distribution
   You may copy and distribute verbatim copies of this Font in any medium, without restriction, provided that you retain this license file (ARPHICPL.TXT) unaltered in all copies.

2. Modification
   You may otherwise modify your copy of this Font in any way, including modifying glyph, reordering glyph, converting format, changing font name, or adding/deleting some characters in/from glyph table, and copy and distribute such modifications under the terms of Section 1 above, provided that the following conditions are met:

   a) You must insert a prominent notice in each modified file stating how and when you changed that file.

   b) You must make such modifications Freely Available as a whole to all third parties under the terms of this License, such as by offering access to copy the modifications from a designated place, or distributing the modifications on a medium customarily used for software interchange.

   c) If the modified fonts normally reads commands interactively when run, you must cause it, when started running for such interactive use in the most ordinary way, to print or display an announcement including an appropriate copyright notice and a notice that there is no warranty (or else, saying that you provide a warranty) and that users may redistribute the Font under these conditions, and telling the user how to view a copy of this License.

   These requirements apply to the modified work as a whole. If identifiable sections of that work are not derived from the Font, and can be reasonably considered independent and separate works in themselves, then this License and its terms, do not apply to those sections when you distribute them as separate works. Therefore, mere aggregation of another work not based on the Font with the Font on a volume of a storage or distribution medium does not bring the other work under the scope of this License.

3. Condition Subsequent
   You may not copy, modify, sublicense, or distribute the Font except as expressly provided under this License. Any attempt otherwise to copy, modify, sublicense or distribute the Font will automatically retroactively void your rights under this License. However, parties who have received copies or rights from you under this License will keep their licenses valid so long as such parties remain in full compliance.

4. Acceptance
   You are not required to accept this License, since you have not signed it. However, nothing else grants you permission to copy, modify, sublicense or distribute the Font. These actions are prohibited by law if you do not accept this License. Therefore, by copying, modifying, sublicensing or distributing the Font, you indicate your acceptance of this License and all its terms and conditions.

5. Automatic Receipt
   Each time you redistribute the Font, the recipient automatically receives a license from the original licensor to copy, distribute or modify the Font subject to these terms and conditions. You may not impose any further restrictions on the recipients' exercise of the rights granted herein. You are not responsible for enforcing compliance by third parties to this License. 

6. Contradiction
   If, as a consequence of a court judgment or allegation of patent infringement or for any other reason (not limited to patent issues), conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License. If you cannot distribute so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not distribute the Font at all. For example, if a patent license would not permit royalty-free redistribution of the Font by all those who receive copies directly or indirectly through you, then the only way you could satisfy both it and this License would be to refrain entirely from distribution of the Font.

   If any portion of this section is held invalid or unenforceable under any particular circumstance, the balance of the section is intended to apply and the section as a whole is intended to apply in other circumstances. 

7. NO WARRANTY
   BECAUSE THE FONT IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE FONT, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS OR OTHER PARTIES PROVIDE THE FONT "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE FONT IS WITH YOU. SHOULD THE FONT PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

8. DAMAGES WAIVER
   UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING, IN NO EVENT WILL ANY COPYRIGHTT HOLDERS, OR OTHER PARTIES WHO MAY COPY, MODIFY OR REDISTRIBUTE THE FONT AS PERMITTED ABOVE, BE LIABLE TO YOU FOR ANY DIRECT, INDIRECT, CONSEQUENTIAL, INCIDENTAL, SPECIAL OR EXEMPLARY DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE FONT (INCLUDING BUT NOT LIMITED TO PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA OR PROFITS; OR BUSINESS INTERRUPTION), EVEN IF SUCH HOLDERS OR OTHER PARTIES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</div>
                        </details>
                    </div>
                </li>

                <li class="credit-item">
                    <div class="credit-name">2. äºˆå‚™æ¼¢å­—ãƒ‡ãƒ¼ã‚¿ (hanzi-writer-data)</div>
                    <div class="credit-desc">
                        â€¢ Source: <a href="https://github.com/chanind/hanzi-writer-data" target="_blank" class="credit-link">GitHub Repository</a><br>
                        â€¢ Licensed under <strong>GPL v3</strong><br>
                        â€¢ Base Data: MakeMeHanzi / KanjiVG
                    </div>
                </li>

                <li class="credit-item">
                    <div class="credit-name">3. è¡¨ç¤ºãƒ©ã‚¤ãƒ–ãƒ©ãƒª</div>
                    <div class="credit-desc">
                        â€¢ <strong>Hanzi Writer</strong>: <a href="https://chanind.github.io/hanzi-writer/" target="_blank" class="credit-link">Official Site</a>
                    </div>
                </li>
            </ul>
            
            <p style="font-size: 0.8em; color: #777; margin-top: 20px; text-align: center;">
                æœ¬ã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ¼ã‚¿ã¯ç„¡ä¿è¨¼ã§ã‚ã‚Šã€åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸã„ã‹ãªã‚‹çµæœã«ã¤ã„ã¦ã‚‚é–‹ç™ºè€…ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚
            </p>
        </div>
        <br><br>
    </div>

    <div id="list-screen" class="screen">
        <div class="header-bar">
            <button class="back-btn" onclick="showScreen('title-screen')">ğŸ  ãƒ›ãƒ¼ãƒ </button>
            <div style="font-weight:bold; font-size:1.2rem;">
                <span id="list-mascot">ğŸ¥š</span> Lv.<span id="list-level">1</span>
            </div>
        </div>
        
        <div class="xp-container">
            <div class="xp-bar" id="xp-bar"></div>
        </div>
        <div style="text-align:right; font-size:0.8rem; margin-bottom:10px; color:#666;">
            ã¤ãã®ãƒ¬ãƒ™ãƒ«ã¾ã§ ã‚ã¨ <span id="next-xp">5</span>ã“
        </div>

        <div class="search-area">
            <input type="text" id="search-box" placeholder="ã‹ã‚“ã˜ ã‚’ ã•ãŒã™..." oninput="filterList()">
        </div>

        <div style="margin-bottom:10px; display:flex; justify-content:center;">
            <span id="mode-display" style="padding:5px 15px; border-radius:15px; color:white; font-size:0.9rem;"></span>
        </div>

        <div id="kanji-grid" class="kanji-grid">
            </div>
    </div>

    <div id="practice-screen" class="screen">
        <div class="header-bar">
            <button class="back-btn" onclick="showScreen('list-screen')">â†© ã‚‚ã©ã‚‹</button>
            <div style="font-weight:bold;">
                <span id="current-reading"></span>
            </div>
        </div>

        <h2 id="message-area" style="margin:10px 0; color:#006064;">ã†ã™ã„ã›ã‚“ã‚’ ãªãã‚ã†ï¼</h2>

        <div id="practice-area">
            <div id="character-target"></div>
        </div>

        <div class="controls">
            <button class="control-btn" onclick="writer.animateCharacter()">â–¶</button>
            <button class="control-btn" onclick="retry()">â†º</button>
        </div>
    </div>

    <div id="result-overlay" class="overlay">
        <div class="result-content">
            <div class="big-icon" id="result-icon">â­</div>
            <h2 id="result-msg">ã§ããŸï¼</h2>
            <button class="next-btn" onclick="document.getElementById('result-overlay').classList.remove('active'); goNext();">ã¤ãã¸</button>
            <br><br>
            <button style="background:none; border:none; color:#999; text-decoration:underline;" onclick="document.getElementById('result-overlay').classList.remove('active'); retry();">ã‚‚ã†ã„ã£ã‹ã„</button>
        </div>
    </div>

    <div id="levelup-overlay" class="overlay">
        <div class="result-content" style="border:5px solid #FF9800;">
            <h2 style="color:#FF5722; font-size:2rem;">ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼</h2>
            <div class="levelup-anim">âœ¨</div>
            <div style="font-size:1.5rem; margin:10px 0;">Lv.<span id="new-level-num">2</span> ã«ãªã£ãŸï¼</div>
            <div style="font-size:3rem; margin:20px 0;" id="levelup-mascot">ğŸ£</div>
            <p>ã‚ãŸã‚‰ã—ã„ ãªã‹ã¾ ã« ã—ã‚“ã‹ ã—ãŸã‚ˆï¼</p>
            <button class="next-btn" onclick="closeLevelUp()">ã‚„ã£ãŸãƒ¼ï¼</button>
        </div>
    </div>

    <script>
        // --- å…¨å­¦å¹´æ¼¢å­—ãƒ‡ãƒ¼ã‚¿ï¼ˆåœ§ç¸®å½¢å¼ï¼‰ ---
        const compressedKanjiData = {
            1: "ä¸€:ã‚¤ãƒ/ã²ã¨-ã¤,äºŒ:ãƒ‹/ãµãŸ-ã¤,ä¸‰:ã‚µãƒ³/ã¿ã£-ã¤,å››:ã‚·/ã‚ˆã‚“,äº”:ã‚´/ã„ã¤-ã¤,å…­:ãƒ­ã‚¯/ã‚ã£-ã¤,ä¸ƒ:ã‚·ãƒ/ãªãª,å…«:ãƒãƒ/ã‚„ã£-ã¤,ä¹:ã‚­ãƒ¥ã‚¦/ã“ã“ã®-ã¤,å:ã‚¸ãƒ¥ã‚¦/ã¨ãŠ,äºº:ã‚¸ãƒ³/ã²ã¨,æ—¥:ãƒ‹ãƒ/ã²,æœˆ:ã‚²ãƒ„/ã¤ã,ç«:ã‚«/ã²,æ°´:ã‚¹ã‚¤/ã¿ãš,æœ¨:ãƒ¢ã‚¯/ã,é‡‘:ã‚­ãƒ³/ã‹ã­,åœŸ:ãƒ‰/ã¤ã¡,ä¸Š:ã‚¸ãƒ§ã‚¦/ã†ãˆ,ä¸‹:ã‚«/ã—ãŸ,å·¦:ã‚µ/ã²ã ã‚Š,å³:ã‚¦/ã¿ã,ä¸­:ãƒãƒ¥ã‚¦/ãªã‹,å¤§:ãƒ€ã‚¤/ãŠãŠ-ãã„,å°:ã‚·ãƒ§ã‚¦/ã¡ã„-ã•ã„,å±±:ã‚µãƒ³/ã‚„ã¾,å·:ã‚»ãƒ³/ã‹ã‚,ç”°:ãƒ‡ãƒ³/ãŸ,å£:ã‚³ã‚¦/ãã¡,ç›®:ãƒ¢ã‚¯/ã‚,è€³:ã‚¸/ã¿ã¿,æ‰‹:ã‚·ãƒ¥/ã¦,è¶³:ã‚½ã‚¯/ã‚ã—,åŠ›:ãƒªãƒ§ã‚¯/ã¡ã‹ã‚‰,å¥³:ã‚¸ãƒ§/ãŠã‚“ãª,ç”·:ãƒ€ãƒ³/ãŠã¨ã“,å­:ã‚·/ã“,å­¦:ã‚¬ã‚¯/ã¾ãª-ã¶,æ ¡:ã‚³ã‚¦,å…ˆ:ã‚»ãƒ³/ã•ã,ç”Ÿ:ã‚»ã‚¤/ã„-ãã‚‹,å:ãƒ¡ã‚¤/ãª,å­—:ã‚¸/ã‚ã–,æ–‡:ãƒ–ãƒ³/ãµã¿,æœ¬:ãƒ›ãƒ³/ã‚‚ã¨,æ­£:ã‚»ã‚¤/ãŸã -ã—ã„,ç™½:ãƒã‚¯/ã—ã‚,é’:ã‚»ã‚¤/ã‚ãŠ,èµ¤:ã‚»ã‚­/ã‚ã‹,èŠ±:ã‚«/ã¯ãª,è‰:ã‚½ã‚¦/ãã•,æ—:ãƒªãƒ³/ã¯ã‚„ã—,æ£®:ã‚·ãƒ³/ã‚‚ã‚Š,ç©º:ã‚¯ã‚¦/ãã‚‰,å¤©:ãƒ†ãƒ³/ã‚ã‚,é›¨:ã‚¦/ã‚ã‚,çŸ³:ã‚»ã‚­/ã„ã—,è»Š:ã‚·ãƒ£/ãã‚‹ã¾,éŸ³:ã‚ªãƒ³/ãŠã¨,å††:ã‚¨ãƒ³/ã¾ã‚‹,ç‹:ã‚ªã‚¦,ç‰:ã‚®ãƒ§ã‚¯/ãŸã¾,è™«:ãƒãƒ¥ã‚¦/ã‚€ã—,ç”º:ãƒãƒ§ã‚¦/ã¾ã¡,æ‘:ã‚½ãƒ³/ã‚€ã‚‰,ç«¹:ãƒã‚¯/ãŸã‘,æ—©:ã‚½ã‚¦/ã¯ã‚„-ã„,ç«‹:ãƒªãƒ„/ãŸ-ã¤,è¦‹:ã‚±ãƒ³/ã¿-ã‚‹,è²:ãƒã‚¤/ã‹ã„,æ°—:ã‚­,ä¼‘:ã‚­ãƒ¥ã‚¦/ã‚„ã™-ã‚€,ç³¸:ã‚·/ã„ã¨,å…¥:ãƒ‹ãƒ¥ã‚¦/ã¯ã„-ã‚‹,å‡º:ã‚·ãƒ¥ãƒ„/ã§-ã‚‹,çŠ¬:ã‚±ãƒ³/ã„ã¬,å¤•:ã‚»ã‚­/ã‚†ã†,åƒ:ã‚»ãƒ³/ã¡,ç™¾:ãƒ’ãƒ£ã‚¯,å¹´:ãƒãƒ³/ã¨ã—",
            2: "å¼•:ã‚¤ãƒ³/ã²-ã,ç¾½:ã‚¦/ã¯,é›²:ã‚¦ãƒ³/ãã‚‚,åœ’:ã‚¨ãƒ³/ãã®,é :ã‚¨ãƒ³/ã¨ãŠ-ã„,ä½•:ã‚«/ãªã«,ç§‘:ã‚«,å¤:ã‚«/ãªã¤,å®¶:ã‚«/ã„ãˆ,æ­Œ:ã‚«/ã†ãŸ,ç”»:ã‚¬/ã‹ã,å›:ã‚«ã‚¤/ã¾ã‚-ã‚‹,ä¼š:ã‚«ã‚¤/ã‚-ã†,æµ·:ã‚«ã‚¤/ã†ã¿,çµµ:ã‚«ã‚¤/ãˆ,å¤–:ã‚¬ã‚¤/ãã¨,è§’:ã‚«ã‚¯/ã¤ã®,æ¥½:ã‚¬ã‚¯/ãŸã®-ã—ã„,æ´»:ã‚«ãƒ„,é–“:ã‚«ãƒ³/ã‚ã„ã ,ä¸¸:ã‚¬ãƒ³/ã¾ã‚‹,å²©:ã‚¬ãƒ³/ã„ã‚,é¡”:ã‚¬ãƒ³/ã‹ãŠ,æ±½:ã‚­,è¨˜:ã‚­/ã—ã‚‹-ã™,å¸°:ã‚­/ã‹ãˆ-ã‚‹,å¼“:ã‚­ãƒ¥ã‚¦/ã‚†ã¿,ç‰›:ã‚®ãƒ¥ã‚¦/ã†ã—,é­š:ã‚®ãƒ§/ã•ã‹ãª,äº¬:ã‚­ãƒ§ã‚¦,å¼·:ã‚­ãƒ§ã‚¦/ã¤ã‚ˆ-ã„,æ•™:ã‚­ãƒ§ã‚¦/ãŠã—-ãˆã‚‹,è¿‘:ã‚­ãƒ³/ã¡ã‹-ã„,å…„:ã‚±ã‚¤/ã‚ã«,å½¢:ã‚±ã‚¤/ã‹ãŸã¡,è¨ˆ:ã‚±ã‚¤/ã¯ã‹-ã‚‹,å…ƒ:ã‚²ãƒ³/ã‚‚ã¨,è¨€:ã‚²ãƒ³/ã„-ã†,åŸ:ã‚²ãƒ³/ã¯ã‚‰,æˆ¸:ã‚³/ã¨,å¤:ã‚³/ãµã‚‹-ã„,åˆ:ã‚´,å¾Œ:ã‚´/ã‚ã¨,èª:ã‚´/ã‹ãŸ-ã‚‹,å·¥:ã‚³ã‚¦,å…¬:ã‚³ã‚¦,åºƒ:ã‚³ã‚¦/ã²ã‚-ã„,äº¤:ã‚³ã‚¦/ã¾ã˜-ã‚ã‚‹,å…‰:ã‚³ã‚¦/ã²ã‹-ã‚‹,è€ƒ:ã‚³ã‚¦/ã‹ã‚“ãŒ-ãˆã‚‹,è¡Œ:ã‚³ã‚¦/ã„-ã,é«˜:ã‚³ã‚¦/ãŸã‹-ã„,é»„:ã‚³ã‚¦/ã,åˆ:ã‚´ã‚¦/ã‚-ã†,è°·:ã‚³ã‚¯/ãŸã«,å›½:ã‚³ã‚¯/ãã«,é»’:ã‚³ã‚¯/ãã‚,ä»Š:ã‚³ãƒ³/ã„ã¾,æ‰:ã‚µã‚¤,ç´°:ã‚µã‚¤/ã»ã-ã„,ä½œ:ã‚µã‚¯/ã¤ã-ã‚‹,ç®—:ã‚µãƒ³,æ­¢:ã‚·/ã¨-ã¾ã‚‹,å¸‚:ã‚·/ã„ã¡,çŸ¢:ã‚·/ã‚„,å§‰:ã‚·/ã‚ã­,æ€:ã‚·/ãŠã‚‚-ã†,ç´™:ã‚·/ã‹ã¿,å¯º:ã‚¸/ã¦ã‚‰,è‡ª:ã‚¸/ã¿ãšã‹-ã‚‰,æ™‚:ã‚¸/ã¨ã,å®¤:ã‚·ãƒ„,ç¤¾:ã‚·ãƒ£/ã‚„ã—ã‚,å¼±:ã‚¸ãƒ£ã‚¯/ã‚ˆã‚-ã„,é¦–:ã‚·ãƒ¥/ãã³,ç§‹:ã‚·ãƒ¥ã‚¦/ã‚ã,é€±:ã‚·ãƒ¥ã‚¦,æ˜¥:ã‚·ãƒ¥ãƒ³/ã¯ã‚‹,æ›¸:ã‚·ãƒ§/ã‹-ã,å°‘:ã‚·ãƒ§ã‚¦/ã™ã-ãªã„,å ´:ã‚¸ãƒ§ã‚¦/ã°,è‰²:ã‚·ãƒ§ã‚¯/ã„ã‚,é£Ÿ:ã‚·ãƒ§ã‚¯/ãŸ-ã¹ã‚‹,å¿ƒ:ã‚·ãƒ³/ã“ã“ã‚,æ–°:ã‚·ãƒ³/ã‚ãŸã‚‰-ã—ã„,è¦ª:ã‚·ãƒ³/ãŠã‚„,å›³:ã‚º/ã¯ã‹-ã‚‹,æ•°:ã‚¹ã‚¦/ã‹ãš,è¥¿:ã‚»ã‚¤/ã«ã—,å£°:ã‚»ã‚¤/ã“ãˆ,æ˜Ÿ:ã‚»ã‚¤/ã»ã—,æ™´:ã‚»ã‚¤/ã¯-ã‚Œã‚‹,åˆ‡:ã‚»ãƒ„/ã-ã‚‹,é›ª:ã‚»ãƒ„/ã‚†ã,èˆ¹:ã‚»ãƒ³/ãµã­,ç·š:ã‚»ãƒ³,å‰:ã‚¼ãƒ³/ã¾ãˆ,çµ„:ã‚½/ã-ã‚€,èµ°:ã‚½ã‚¦/ã¯ã—-ã‚‹,å¤š:ã‚¿/ãŠãŠ-ã„,å¤ª:ã‚¿ã‚¤/ãµã¨-ã„,ä½“:ã‚¿ã‚¤/ã‹ã‚‰ã ,å°:ãƒ€ã‚¤,åœ°:ãƒ,æ± :ãƒ/ã„ã‘,çŸ¥:ãƒ/ã—-ã‚‹,èŒ¶:ãƒãƒ£,æ˜¼:ãƒãƒ¥ã‚¦/ã²ã‚‹,é•·:ãƒãƒ§ã‚¦/ãªãŒ-ã„,é³¥:ãƒãƒ§ã‚¦/ã¨ã‚Š,æœ:ãƒãƒ§ã‚¦/ã‚ã•,ç›´:ãƒãƒ§ã‚¯/ãªãŠ-ã™,é€š:ãƒ„ã‚¦/ã¨ãŠ-ã‚‹,å¼Ÿ:ãƒ†ã‚¤/ãŠã¨ã†ã¨,åº—:ãƒ†ãƒ³/ã¿ã›,ç‚¹:ãƒ†ãƒ³,é›»:ãƒ‡ãƒ³,åˆ€:ãƒˆã‚¦/ã‹ãŸãª,å†¬:ãƒˆã‚¦/ãµã‚†,å½“:ãƒˆã‚¦/ã‚-ãŸã‚‹,æ±:ãƒˆã‚¦/ã²ãŒã—,ç­”:ãƒˆã‚¦/ã“ãŸ-ãˆ,é ­:ãƒˆã‚¦/ã‚ãŸã¾,åŒ:ãƒ‰ã‚¦/ãŠãª-ã˜,é“:ãƒ‰ã‚¦/ã¿ã¡,èª­:ãƒ‰ã‚¯/ã‚ˆ-ã‚€,å†…:ãƒŠã‚¤/ã†ã¡,å—:ãƒŠãƒ³/ã¿ãªã¿,è‚‰:ãƒ‹ã‚¯,é¦¬:ãƒ/ã†ã¾,å£²:ãƒã‚¤/ã†-ã‚‹,è²·:ãƒã‚¤/ã‹-ã†,éº¦:ãƒã‚¯/ã‚€ã,åŠ:ãƒãƒ³/ãªã‹-ã°,ç•ª:ãƒãƒ³,çˆ¶:ãƒ•/ã¡ã¡,é¢¨:ãƒ•ã‚¦/ã‹ãœ,åˆ†:ãƒ–ãƒ³/ã‚-ã‘ã‚‹,è:ãƒ–ãƒ³/ã-ã,ç±³:ãƒ™ã‚¤/ã“ã‚,æ­©:ãƒ›/ã‚ã‚‹-ã,æ¯:ãƒœ/ã¯ã¯,æ–¹:ãƒ›ã‚¦/ã‹ãŸ,åŒ—:ãƒ›ã‚¯/ããŸ,æ¯:ãƒã‚¤,å¦¹:ãƒã‚¤/ã„ã‚‚ã†ã¨,ä¸‡:ãƒãƒ³,æ˜:ãƒ¡ã‚¤/ã‚ã‹-ã‚‹ã„,é³´:ãƒ¡ã‚¤/ãª-ã,æ¯›:ãƒ¢ã‚¦/ã‘,é–€:ãƒ¢ãƒ³,å¤œ:ãƒ¤/ã‚ˆã‚‹,é‡:ãƒ¤/ã®,å‹:ãƒ¦ã‚¦/ã¨ã‚‚,ç”¨:ãƒ¨ã‚¦/ã‚‚ã¡-ã„ã‚‹,æ›œ:ãƒ¨ã‚¦,æ¥:ãƒ©ã‚¤/ã-ã‚‹,é‡Œ:ãƒª/ã•ã¨,ç†:ãƒª,è©±:ãƒ¯/ã¯ãªã—",
            3: "æ‚ª:ã‚¢ã‚¯/ã‚ã‚‹-ã„,å®‰:ã‚¢ãƒ³/ã‚„ã™-ã„,æš—:ã‚¢ãƒ³/ãã‚‰-ã„,åŒ»:ã‚¤,å§”:ã‚¤/ã‚†ã -ã­ã‚‹,æ„:ã‚¤,è‚²:ã‚¤ã‚¯/ãã -ã¤,å“¡:ã‚¤ãƒ³,é™¢:ã‚¤ãƒ³,é£²:ã‚¤ãƒ³/ã®-ã‚€,é‹:ã‚¦ãƒ³/ã¯ã“-ã¶,æ³³:ã‚¨ã‚¤/ãŠã‚ˆ-ã,é§…:ã‚¨ã‚­,å¤®:ã‚ªã‚¦,æ¨ª:ã‚ªã‚¦/ã‚ˆã“,å±‹:ã‚ªã‚¯/ã‚„,æ¸©:ã‚ªãƒ³/ã‚ãŸãŸ-ã‹ã„,åŒ–:ã‚«/ã°-ã‘ã‚‹,è·:ã‚«/ã«,ç•Œ:ã‚«ã‚¤,é–‹:ã‚«ã‚¤/ã²ã‚‰-ã,éš:ã‚«ã‚¤,å¯’:ã‚«ãƒ³/ã•ã‚€-ã„,æ„Ÿ:ã‚«ãƒ³,æ¼¢:ã‚«ãƒ³,é¤¨:ã‚«ãƒ³,å²¸:ã‚¬ãƒ³/ãã—,èµ·:ã‚­/ãŠ-ãã‚‹,æœŸ:ã‚­,å®¢:ã‚­ãƒ£ã‚¯,ç©¶:ã‚­ãƒ¥ã‚¦/ãã‚-ã‚ã‚‹,æ€¥:ã‚­ãƒ¥ã‚¦/ã„ã-ã,ç´š:ã‚­ãƒ¥ã‚¦,å®®:ã‚­ãƒ¥ã‚¦/ã¿ã‚„,çƒ:ã‚­ãƒ¥ã‚¦/ãŸã¾,å»:ã‚­ãƒ§/ã•-ã‚‹,æ©‹:ã‚­ãƒ§ã‚¦/ã¯ã—,æ¥­:ã‚®ãƒ§ã‚¦/ã‚ã–,æ›²:ã‚­ãƒ§ã‚¯/ã¾-ãŒã‚‹,å±€:ã‚­ãƒ§ã‚¯,éŠ€:ã‚®ãƒ³,åŒº:ã‚¯,è‹¦:ã‚¯/ãã‚‹-ã—ã„,å…·:ã‚°,å›:ã‚¯ãƒ³/ãã¿,ä¿‚:ã‚±ã‚¤/ã‹ã‹ã‚Š,è»½:ã‚±ã‚¤/ã‹ã‚‹-ã„,è¡€:ã‚±ãƒ„/ã¡,æ±º:ã‚±ãƒ„/ã-ã‚ã‚‹,ç ”:ã‚±ãƒ³/ã¨-ã,çœŒ:ã‚±ãƒ³,åº«:ã‚³,æ¹–:ã‚³/ã¿ãšã†ã¿,å‘:ã‚³ã‚¦/ã‚€-ã‹ã†,å¹¸:ã‚³ã‚¦/ã—ã‚ã‚-ã›,æ¸¯:ã‚³ã‚¦/ã¿ãªã¨,å·:ã‚´ã‚¦,æ ¹:ã‚³ãƒ³/ã­,ç¥­:ã‚µã‚¤/ã¾ã¤-ã‚Š,çš¿:ã‚µãƒ©,ä»•:ã‚·/ã¤ã‹-ãˆã‚‹,æ­»:ã‚·/ã—-ã¬,ä½¿:ã‚·/ã¤ã‹-ã†,å§‹:ã‚·/ã¯ã˜-ã‚ã‚‹,æŒ‡:ã‚·/ã‚†ã³,æ­¯:ã‚·/ã¯,è©©:ã‚·,æ¬¡:ã‚¸/ã¤ã,äº‹:ã‚¸/ã“ã¨,æŒ:ã‚¸/ã‚‚-ã¤,å¼:ã‚·ã‚­,å®Ÿ:ã‚¸ãƒ„/ã¿,å†™:ã‚·ãƒ£/ã†ã¤-ã™,è€…:ã‚·ãƒ£/ã‚‚ã®,ä¸»:ã‚·ãƒ¥/ã¬ã—,å®ˆ:ã‚·ãƒ¥/ã¾ã‚‚-ã‚‹,å–:ã‚·ãƒ¥/ã¨-ã‚‹,é…’:ã‚·ãƒ¥/ã•ã‘,å—:ã‚¸ãƒ¥/ã†-ã‘ã‚‹,å·:ã‚·ãƒ¥ã‚¦,æ‹¾:ã‚·ãƒ¥ã‚¦/ã²ã‚-ã†,çµ‚:ã‚·ãƒ¥ã‚¦/ãŠ-ã‚ã‚‹,ç¿’:ã‚·ãƒ¥ã‚¦/ãªã‚‰-ã†,é›†:ã‚·ãƒ¥ã‚¦/ã‚ã¤-ã‚ã‚‹,ä½:ã‚¸ãƒ¥ã‚¦/ã™-ã‚€,é‡:ã‚¸ãƒ¥ã‚¦/ãŠã‚‚-ã„,å®¿:ã‚·ãƒ¥ã‚¯/ã‚„ã©,æ‰€:ã‚·ãƒ§/ã¨ã“ã‚,æš‘:ã‚·ãƒ§/ã‚ã¤-ã„,åŠ©:ã‚¸ãƒ§/ãŸã™-ã‘ã‚‹,æ˜­:ã‚·ãƒ§ã‚¦,æ¶ˆ:ã‚·ãƒ§ã‚¦/ã-ãˆã‚‹,å•†:ã‚·ãƒ§ã‚¦/ã‚ããª-ã†,ç« :ã‚·ãƒ§ã‚¦,å‹:ã‚·ãƒ§ã‚¦/ã‹-ã¤,ä¹—:ã‚¸ãƒ§ã‚¦/ã®-ã‚‹,æ¤:ã‚·ãƒ§ã‚¯/ã†-ãˆã‚‹,ç”³:ã‚·ãƒ³/ã‚‚ã†-ã™,èº«:ã‚·ãƒ³/ã¿,ç¥:ã‚·ãƒ³/ã‹ã¿,çœŸ:ã‚·ãƒ³/ã¾,æ·±:ã‚·ãƒ³/ãµã‹-ã„,é€²:ã‚·ãƒ³/ã™ã™-ã‚€,ä¸–:ã‚»ã‚¤/ã‚ˆ,æ•´:ã‚»ã‚¤/ã¨ã¨ã®-ãˆã‚‹,æ˜”:ã‚»ã‚­/ã‚€ã‹ã—,å…¨:ã‚¼ãƒ³/ã™ã¹-ã¦,ç›¸:ã‚½ã‚¦/ã‚ã„,é€:ã‚½ã‚¦/ãŠã-ã‚‹,æƒ³:ã‚½ã‚¦,æ¯:ã‚½ã‚¯/ã„ã,é€Ÿ:ã‚½ã‚¯/ã¯ã‚„-ã„,æ—:ã‚¾ã‚¯,ä»–:ã‚¿/ã»ã‹,æ‰“:ãƒ€/ã†-ã¤,å¯¾:ã‚¿ã‚¤,å¾…:ã‚¿ã‚¤/ã¾-ã¤,ä»£:ãƒ€ã‚¤/ã‹-ã‚ã‚‹,ç¬¬:ãƒ€ã‚¤,é¡Œ:ãƒ€ã‚¤,ç‚­:ã‚¿ãƒ³/ã™ã¿,çŸ­:ã‚¿ãƒ³/ã¿ã˜ã‹-ã„,è«‡:ãƒ€ãƒ³,ç€:ãƒãƒ£ã‚¯/ã-ã‚‹,æ³¨:ãƒãƒ¥ã‚¦/ãã-ã,æŸ±:ãƒãƒ¥ã‚¦/ã¯ã—ã‚‰,ä¸:ãƒãƒ§ã‚¦,å¸³:ãƒãƒ§ã‚¦,èª¿:ãƒãƒ§ã‚¦/ã—ã‚‰-ã¹ã‚‹,è¿½:ãƒ„ã‚¤/ãŠ-ã†,å®š:ãƒ†ã‚¤/ã•ã -ã‚ã‚‹,åº­:ãƒ†ã‚¤/ã«ã‚,ç¬›:ãƒ†ã‚­/ãµãˆ,é‰„:ãƒ†ãƒ„,è»¢:ãƒ†ãƒ³/ã“ã‚-ã¶,éƒ½:ãƒˆ/ã¿ã‚„ã“,åº¦:ãƒ‰/ãŸã³,æŠ•:ãƒˆã‚¦/ãª-ã’ã‚‹,è±†:ãƒˆã‚¦/ã¾ã‚,å³¶:ãƒˆã‚¦/ã—ã¾,æ¹¯:ãƒˆã‚¦/ã‚†,ç™»:ãƒˆã‚¦/ã®ã¼-ã‚‹,ç­‰:ãƒˆã‚¦/ã²ã¨-ã—ã„,å‹•:ãƒ‰ã‚¦/ã†ã”-ã,ç«¥:ãƒ‰ã‚¦/ã‚ã‚‰ã¹,è¾²:ãƒã‚¦,æ³¢:ãƒ/ãªã¿,é…:ãƒã‚¤/ãã°-ã‚‹,å€:ãƒã‚¤,ç®±:ãƒã‚³,ç•‘:ã¯ãŸã‘,ç™º:ãƒãƒ„,å:ãƒãƒ³/ã-ã‚‹,å‚:ãƒãƒ³/ã•ã‹,æ¿:ãƒãƒ³/ã„ãŸ,çš®:ãƒ’/ã‹ã‚,æ‚²:ãƒ’/ã‹ãª-ã—ã„,ç¾:ãƒ“/ã†ã¤ã-ã—ã„,é¼»:ãƒ“/ã¯ãª,ç­†:ãƒ’ãƒ„/ãµã§,æ°·:ãƒ’ãƒ§ã‚¦/ã“ãŠã‚Š,è¡¨:ãƒ’ãƒ§ã‚¦/ãŠã‚‚ã¦,ç§’:ãƒ“ãƒ§ã‚¦,ç—…:ãƒ“ãƒ§ã‚¦/ã‚„ã¾ã„,å“:ãƒ’ãƒ³/ã—ãª,è² :ãƒ•/ã¾-ã‘ã‚‹,éƒ¨:ãƒ–,æœ:ãƒ•ã‚¯,ç¦:ãƒ•ã‚¯,ç‰©:ãƒ–ãƒ„/ã‚‚ã®,å¹³:ãƒ˜ã‚¤/ãŸã„-ã‚‰,è¿”:ãƒ˜ãƒ³/ã‹ãˆ-ã™,å‹‰:ãƒ™ãƒ³,æ”¾:ãƒ›ã‚¦/ã¯ãª-ã™,å‘³:ãƒŸ/ã‚ã˜,å‘½:ãƒ¡ã‚¤/ã„ã®ã¡,é¢:ãƒ¡ãƒ³/ãŠã‚‚,å•:ãƒ¢ãƒ³/ã¨-ã†,å½¹:ãƒ¤ã‚¯,è–¬:ãƒ¤ã‚¯/ãã™ã‚Š,ç”±:ãƒ¦/ã‚ˆã—,æ²¹:ãƒ¦/ã‚ã¶ã‚‰,æœ‰:ãƒ¦ã‚¦/ã‚-ã‚‹,éŠ:ãƒ¦ã‚¦/ã‚ã-ã¶,äºˆ:ãƒ¨,ç¾Š:ãƒ¨ã‚¦/ã²ã¤ã˜,æ´‹:ãƒ¨ã‚¦,è‘‰:ãƒ¨ã‚¦/ã¯,é™½:ãƒ¨ã‚¦/ã²,æ§˜:ãƒ¨ã‚¦/ã•ã¾,è½:ãƒ©ã‚¯/ãŠ-ã¡ã‚‹,æµ:ãƒªãƒ¥ã‚¦/ãªãŒ-ã‚Œã‚‹,æ—…:ãƒªãƒ§/ãŸã³,ä¸¡:ãƒªãƒ§ã‚¦,ç·‘:ãƒªãƒ§ã‚¯/ã¿ã©ã‚Š,ç¤¼:ãƒ¬ã‚¤,åˆ—:ãƒ¬ãƒ„,ç·´:ãƒ¬ãƒ³/ã­-ã‚‹,è·¯:ãƒ­/ã˜,å’Œ:ãƒ¯/ã‚„ã‚-ã‚‰ã",
            4: "æ„›:ã‚¢ã‚¤,æ¡ˆ:ã‚¢ãƒ³,ä»¥:ã‚¤,è¡£:ã‚¤/ã“ã‚ã‚‚,ä½:ã‚¤/ãã‚‰ã„,å›²:ã‚¤/ã‹ã“-ã‚€,èƒƒ:ã‚¤,å°:ã‚¤ãƒ³/ã—ã‚‹ã—,è‹±:ã‚¨ã‚¤,æ „:ã‚¨ã‚¤/ã•ã‹-ãˆã‚‹,å¡©:ã‚¨ãƒ³/ã—ãŠ,å„„:ã‚ªã‚¯,åŠ :ã‚«/ãã‚-ãˆã‚‹,æœ:ã‚«/ã¯-ãŸã™,è²¨:ã‚«,èª²:ã‚«,èŠ½:ã‚¬/ã‚,æ”¹:ã‚«ã‚¤/ã‚ã‚‰ãŸ-ã‚ã‚‹,æ¢°:ã‚«ã‚¤,å®³:ã‚¬ã‚¤,å„:ã‚«ã‚¯/ãŠã®ãŠã®,è¦š:ã‚«ã‚¯/ãŠã¼-ãˆã‚‹,å®Œ:ã‚«ãƒ³,å®˜:ã‚«ãƒ³,ç®¡:ã‚«ãƒ³/ãã ,é–¢:ã‚«ãƒ³/ã›ã,è¦³:ã‚«ãƒ³/ã¿-ã‚‹,é¡˜:ã‚¬ãƒ³/ã­ãŒ-ã†,å¸Œ:ã‚­,å­£:ã‚­,ç´€:ã‚­,å–œ:ã‚­/ã‚ˆã‚ã“-ã¶,æ——:ã‚­/ã¯ãŸ,å™¨:ã‚­/ã†ã¤ã‚,æ©Ÿ:ã‚­,è­°:ã‚®,æ±‚:ã‚­ãƒ¥ã‚¦/ã‚‚ã¨-ã‚ã‚‹,æ³£:ã‚­ãƒ¥ã‚¦/ãª-ã,æ•‘:ã‚­ãƒ¥ã‚¦/ã™ã-ã†,çµ¦:ã‚­ãƒ¥ã‚¦/ãŸã¾-ã†,æŒ™:ã‚­ãƒ§/ã‚-ã’ã‚‹,æ¼:ã‚®ãƒ§,å…±:ã‚­ãƒ§ã‚¦/ã¨ã‚‚,å”:ã‚­ãƒ§ã‚¦,é¡:ã‚­ãƒ§ã‚¦/ã‹ãŒã¿,ç«¶:ã‚­ãƒ§ã‚¦/ãã-ã†,æ¥µ:ã‚­ãƒ§ã‚¯/ãã‚-ã‚ã‚‹,è¨“:ã‚¯ãƒ³,è»:ã‚°ãƒ³,éƒ¡:ã‚°ãƒ³,å¾„:ã‚±ã‚¤,å‹:ã‚±ã‚¤/ã‹ãŸ,æ™¯:ã‚±ã‚¤,èŠ¸:ã‚²ã‚¤,æ¬ :ã‚±ãƒ„/ã‹-ã‘ã‚‹,çµ:ã‚±ãƒ„/ã‚€ã™-ã¶,å»º:ã‚±ãƒ³/ãŸ-ã¦ã‚‹,å¥:ã‚±ãƒ³/ã™ã“-ã‚„ã‹,é¨“:ã‚±ãƒ³,å›º:ã‚³/ã‹ãŸ-ã‚ã‚‹,å€™:ã‚³ã‚¦,åŠŸ:ã‚³ã‚¦,å¥½:ã‚³ã‚¦/ã™-ã,æœ­:ã‚µãƒ„/ãµã ,åˆ·:ã‚µãƒ„/ã™-ã‚‹,æ®º:ã‚µãƒ„/ã“ã‚-ã™,å¯Ÿ:ã‚µãƒ„,å‚:ã‚µãƒ³/ã¾ã„-ã‚‹,ç”£:ã‚µãƒ³/ã†-ã‚€,æ•£:ã‚µãƒ³/ã¡-ã‚‹,æ®‹:ã‚¶ãƒ³/ã®ã“-ã‚‹,å£«:ã‚·,æ°:ã‚·/ã†ã˜,å²:ã‚·,å¸:ã‚·,è©¦:ã‚·/ã“ã“ã‚-ã¿ã‚‹,å…:ã‚¸,æ²»:ã‚¸/ãŠã•-ã‚ã‚‹,è¾:ã‚¸/ã‚„-ã‚ã‚‹,å¤±:ã‚·ãƒ„/ã†ã—ãª-ã†,å€Ÿ:ã‚·ãƒ£ã‚¯/ã‹-ã‚Šã‚‹,ç¨®:ã‚·ãƒ¥/ãŸã­,å‘¨:ã‚·ãƒ¥ã‚¦/ã¾ã‚-ã‚Š,ç¥:ã‚·ãƒ¥ã‚¯/ã„ã‚-ã†,é †:ã‚¸ãƒ¥ãƒ³,åˆ:ã‚·ãƒ§/ã¯ã˜-ã‚,æ¾:ã‚·ãƒ§ã‚¦/ã¾ã¤,ç¬‘:ã‚·ãƒ§ã‚¦/ã‚ã‚‰-ã†,å”±:ã‚·ãƒ§ã‚¦/ã¨ãª-ãˆã‚‹,ç„¼:ã‚·ãƒ§ã‚¦/ã‚„-ã,è±¡:ã‚·ãƒ§ã‚¦,ç…§:ã‚·ãƒ§ã‚¦/ã¦-ã‚‰ã™,è³:ã‚·ãƒ§ã‚¦,è‡£:ã‚·ãƒ³,ä¿¡:ã‚·ãƒ³/ã—ã‚“-ã˜ã‚‹,æˆ:ã‚»ã‚¤/ãª-ã‚‹,çœ:ã‚»ã‚¤/ã¯ã¶-ã,æ¸…:ã‚»ã‚¤/ãã‚ˆ-ã„,é™:ã‚»ã‚¤/ã—ãš-ã‹,å¸­:ã‚»ã‚­,ç©:ã‚»ã‚­/ã¤-ã‚€,æŠ˜:ã‚»ãƒ„/ãŠ-ã‚‹,ç¯€:ã‚»ãƒ„/ãµã—,èª¬:ã‚»ãƒ„/ã¨-ã,æµ…:ã‚»ãƒ³/ã‚ã•-ã„,æˆ¦:ã‚»ãƒ³/ãŸãŸã‹-ã†,é¸:ã‚»ãƒ³/ãˆã‚‰-ã¶,ç„¶:ã‚¼ãƒ³,äº‰:ã‚½ã‚¦/ã‚ã‚‰ã-ã†,å€‰:ã‚½ã‚¦/ãã‚‰,å·£:ã‚½ã‚¦/ã™,æŸ:ã‚½ã‚¯/ãŸã°,å´:ã‚½ã‚¯/ãŒã‚,ç¶š:ã‚¾ã‚¯/ã¤ã¥-ã,å’:ã‚½ãƒ„,å­«:ã‚½ãƒ³/ã¾ã”,å¸¯:ã‚¿ã‚¤/ãŠã³,éšŠ:ã‚¿ã‚¤,é”:ã‚¿ãƒ„,å˜:ã‚¿ãƒ³,ç½®:ãƒ/ãŠ-ã,ä»²:ãƒãƒ¥ã‚¦/ãªã‹,è²¯:ãƒãƒ§,å…†:ãƒãƒ§ã‚¦/ãã–-ã—,è…¸:ãƒãƒ§ã‚¦,ä½:ãƒ†ã‚¤/ã²ã-ã„,åº•:ãƒ†ã‚¤/ãã“,åœ:ãƒ†ã‚¤,çš„:ãƒ†ã‚­/ã¾ã¨,å…¸:ãƒ†ãƒ³,ä¼:ãƒ‡ãƒ³/ã¤ãŸ-ãˆã‚‹,å¾’:ãƒˆ,åŠª:ãƒ‰/ã¤ã¨-ã‚ã‚‹,ç¯:ãƒˆã‚¦/ã²,å ‚:ãƒ‰ã‚¦,åƒ:ãƒ‰ã‚¦/ã¯ãŸã‚‰-ã,ç‰¹:ãƒˆã‚¯,å¾—:ãƒˆã‚¯/ãˆ-ã‚‹,æ¯’:ãƒ‰ã‚¯,ç†±:ãƒãƒ„/ã‚ã¤-ã„,å¿µ:ãƒãƒ³,æ•—:ãƒã‚¤/ã‚„ã¶-ã‚‹,æ¢…:ãƒã‚¤/ã†ã‚,åš:ãƒã‚¯,é£¯:ãƒãƒ³/ã‚ã—,é£›:ãƒ’/ã¨-ã¶,è²»:ãƒ’/ã¤ã„-ã‚„ã™,å¿…:ãƒ’ãƒ„/ã‹ãªã‚‰-ãš,ç¥¨:ãƒ’ãƒ§ã‚¦,æ¨™:ãƒ’ãƒ§ã‚¦/ã—ã‚‹ã¹,ä¸:ãƒ•,å¤«:ãƒ•/ãŠã£ã¨,ä»˜:ãƒ•/ã¤-ã,åºœ:ãƒ•,å‰¯:ãƒ•ã‚¯,ç²‰:ãƒ•ãƒ³/ã“ãª,å…µ:ãƒ˜ã‚¤/ã¤ã‚ã‚‚ã®,åˆ¥:ãƒ™ãƒ„/ã‚ã‹-ã‚Œã‚‹,è¾º:ãƒ˜ãƒ³/ã‚ãŸ-ã‚Š,å¤‰:ãƒ˜ãƒ³/ã‹-ã‚ã‚‹,ä¾¿:ãƒ™ãƒ³/ãŸã‚ˆ-ã‚Š,åŒ…:ãƒ›ã‚¦/ã¤ã¤-ã‚€,æ³•:ãƒ›ã‚¦,æœ›:ãƒœã‚¦/ã®ã-ã‚€,ç‰§:ãƒœã‚¯/ã¾ã,æœ«:ãƒãƒ„/ã™ãˆ,æº€:ãƒãƒ³/ã¿-ã¡ã‚‹,æœª:ãƒŸ/ã„ã¾-ã ,è„ˆ:ãƒŸãƒ£ã‚¯,æ°‘:ãƒŸãƒ³/ãŸã¿,ç„¡:ãƒ /ãª-ã„,ç´„:ãƒ¤ã‚¯,å‹‡:ãƒ¦ã‚¦/ã„ã•-ã‚€,è¦:ãƒ¨ã‚¦/ã„-ã‚‹,é¤Š:ãƒ¨ã‚¦/ã‚„ã—ãª-ã†,æµ´:ãƒ¨ã‚¯/ã‚-ã³ã‚‹,åˆ©:ãƒª/ã-ã,é™¸:ãƒªã‚¯,è‰¯:ãƒªãƒ§ã‚¦/ã‚ˆ-ã„,æ–™:ãƒªãƒ§ã‚¦,é‡:ãƒªãƒ§ã‚¦/ã¯ã‹-ã‚‹,è¼ª:ãƒªãƒ³/ã‚,é¡:ãƒ«ã‚¤,ä»¤:ãƒ¬ã‚¤,å†·:ãƒ¬ã‚¤/ã¤ã‚-ãŸã„,ä¾‹:ãƒ¬ã‚¤/ãŸã¨-ãˆã‚‹,æ­´:ãƒ¬ã‚­,é€£:ãƒ¬ãƒ³/ã¤ã‚‰-ãªã‚‹,è€:ãƒ­ã‚¦/ãŠ-ã„ã‚‹,åŠ´:ãƒ­ã‚¦,éŒ²:ãƒ­ã‚¯",
            5: "åœ§:ã‚¢ãƒ„,ç§»:ã‚¤/ã†ã¤-ã‚‹,å› :ã‚¤ãƒ³/ã‚ˆ-ã‚‹,æ°¸:ã‚¨ã‚¤/ãªãŒ-ã„,å–¶:ã‚¨ã‚¤/ã„ã¨ãª-ã‚€,è¡›:ã‚¨ã‚¤,æ˜“:ã‚¨ã‚­/ã‚„ã•-ã—ã„,ç›Š:ã‚¨ã‚­,æ¶²:ã‚¨ã‚­,æ¼”:ã‚¨ãƒ³,å¿œ:ã‚ªã‚¦,å¾€:ã‚ªã‚¦,æ¡œ:ã‚ªã‚¦/ã•ãã‚‰,æ©:ã‚ªãƒ³,å¯:ã‚«,ä»®:ã‚«/ã‹ã‚Š,ä¾¡:ã‚«/ã‚ãŸã„,æ²³:ã‚«/ã‹ã‚,é:ã‚«/ã™-ãã‚‹,è³€:ã‚¬,å¿«:ã‚«ã‚¤/ã“ã“ã‚ã‚ˆ-ã„,è§£:ã‚«ã‚¤/ã¨-ã,æ ¼:ã‚«ã‚¯,ç¢º:ã‚«ã‚¯/ãŸã—-ã‹,é¡:ã‚¬ã‚¯/ã²ãŸã„,åˆŠ:ã‚«ãƒ³,å¹¹:ã‚«ãƒ³/ã¿ã,æ…£:ã‚«ãƒ³/ãª-ã‚Œã‚‹,çœ¼:ã‚¬ãƒ³/ã¾ãªã“,åŸº:ã‚­/ã‚‚ã¨,å¯„:ã‚­/ã‚ˆ-ã‚‹,è¦:ã‚­,æŠ€:ã‚®/ã‚ã–,ç¾©:ã‚®,é€†:ã‚®ãƒ£ã‚¯/ã•ã‹,ä¹…:ã‚­ãƒ¥ã‚¦/ã²ã•-ã—ã„,æ—§:ã‚­ãƒ¥ã‚¦,å±…:ã‚­ãƒ§/ã„-ã‚‹,è¨±:ã‚­ãƒ§/ã‚†ã‚‹-ã™,å¢ƒ:ã‚­ãƒ§ã‚¦/ã•ã‹ã„,å‡:ã‚­ãƒ³,ç¦:ã‚­ãƒ³,å¥:ã‚¯,ç¾¤:ã‚°ãƒ³/ã‚€-ã‚Œã‚‹,çµŒ:ã‚±ã‚¤/ã¸-ã‚‹,æ½”:ã‚±ãƒ„/ã„ã•ãã‚ˆ-ã„,ä»¶:ã‚±ãƒ³,åˆ¸:ã‚±ãƒ³,é™º:ã‚±ãƒ³/ã‘ã‚-ã—ã„,æ¤œ:ã‚±ãƒ³,é™:ã‚²ãƒ³/ã‹ã-ã‚‹,ç¾:ã‚²ãƒ³/ã‚ã‚‰ã‚-ã‚Œã‚‹,æ¸›:ã‚²ãƒ³/ã¸-ã‚‹,æ•…:ã‚³/ã‚†ãˆ,å€‹:ã‚³,è­·:ã‚´/ã¾ã‚‚-ã‚‹,åŠ¹:ã‚³ã‚¦/ã-ã,åš:ã‚³ã‚¦/ã‚ã¤-ã„,è€•:ã‚³ã‚¦/ãŸãŒã‚„-ã™,é‰±:ã‚³ã‚¦,æ§‹:ã‚³ã‚¦/ã‹ã¾-ãˆã‚‹,èˆˆ:ã‚³ã‚¦/ãŠã“-ã™,è¬›:ã‚³ã‚¦,æ··:ã‚³ãƒ³/ã¾-ãœã‚‹,æŸ»:ã‚µ,å†:ã‚µã‚¤/ãµãŸãŸ-ã³,ç½:ã‚µã‚¤/ã‚ã–ã‚-ã„,å¦»:ã‚µã‚¤/ã¤ã¾,æ¡:ã‚µã‚¤/ã¨-ã‚‹,éš›:ã‚µã‚¤/ãã‚,åœ¨:ã‚¶ã‚¤/ã‚-ã‚‹,è²¡:ã‚¶ã‚¤,ç½ª:ã‚¶ã‚¤/ã¤ã¿,é›‘:ã‚¶ãƒ„,é…¸:ã‚µãƒ³/ã™-ã„,è³›:ã‚µãƒ³,æ”¯:ã‚·/ã•ã•-ãˆã‚‹,å¿—:ã‚·/ã“ã“ã‚ã–ã—,æ:ã‚·/ãˆã ,å¸«:ã‚·,è³‡:ã‚·,é£¼:ã‚·/ã‹-ã†,ç¤º:ã‚¸/ã—ã‚-ã™,ä¼¼:ã‚¸/ã«-ã‚‹,è­˜:ã‚·ã‚­,è³ª:ã‚·ãƒ„,èˆ:ã‚·ãƒ£,è¬:ã‚·ãƒ£/ã‚ã‚„ã¾-ã‚‹,æˆ:ã‚¸ãƒ¥/ã•ãš-ã‘ã‚‹,ä¿®:ã‚·ãƒ¥ã‚¦/ãŠã•-ã‚ã‚‹,è¿°:ã‚¸ãƒ¥ãƒ„/ã®-ã¹ã‚‹,è¡“:ã‚¸ãƒ¥ãƒ„/ã™ã¹,æº–:ã‚¸ãƒ¥ãƒ³,åº:ã‚¸ãƒ§,æ‹›:ã‚·ãƒ§ã‚¦/ã¾ã­-ã,æ‰¿:ã‚·ãƒ§ã‚¦/ã†ã‘ãŸã¾ã‚-ã‚‹,è¨¼:ã‚·ãƒ§ã‚¦,æ¡:ã‚¸ãƒ§ã‚¦,çŠ¶:ã‚¸ãƒ§ã‚¦,å¸¸:ã‚¸ãƒ§ã‚¦/ã¤ã­,æƒ…:ã‚¸ãƒ§ã‚¦/ãªã•-ã‘,ç¹”:ã‚·ãƒ§ã‚¯/ãŠ-ã‚‹,è·:ã‚·ãƒ§ã‚¯,åˆ¶:ã‚»ã‚¤,æ€§:ã‚»ã‚¤,æ”¿:ã‚»ã‚¤/ã¾ã¤ã‚Šã”ã¨,å‹¢:ã‚»ã‚¤/ã„ããŠ-ã„,ç²¾:ã‚»ã‚¤,è£½:ã‚»ã‚¤,ç¨:ã‚¼ã‚¤,è²¬:ã‚»ã‚­/ã›-ã‚ã‚‹,ç¸¾:ã‚»ã‚­,æ¥:ã‚»ãƒ„/ã¤-ã,è¨­:ã‚»ãƒ„/ã‚‚ã†-ã‘ã‚‹,èˆŒ:ã‚¼ãƒ„/ã—ãŸ,çµ¶:ã‚¼ãƒ„/ãŸ-ãˆã‚‹,éŠ­:ã‚»ãƒ³/ãœã«,ç¥–:ã‚½,ç´ :ã‚½/ã‚‚ã¨,ç·:ã‚½ã‚¦/ã™ã¹-ã¦,é€ :ã‚¾ã‚¦/ã¤ã-ã‚‹,åƒ:ã‚¾ã‚¦,å¢—:ã‚¾ã‚¦/ã¾-ã™,å‰‡:ã‚½ã‚¯,æ¸¬:ã‚½ã‚¯/ã¯ã‹-ã‚‹,å±:ã‚¾ã‚¯,ç‡:ã‚½ãƒ„/ã²ã-ã„ã‚‹,æ:ã‚½ãƒ³/ãã“-ãªã†,é€€:ã‚¿ã‚¤/ã—ã‚Šã-ã,è²¸:ã‚¿ã‚¤/ã‹-ã™,æ…‹:ã‚¿ã‚¤,å›£:ãƒ€ãƒ³,æ–­:ãƒ€ãƒ³/ã“ã¨ã‚-ã‚‹,ç¯‰:ãƒã‚¯/ããš-ã,å¼µ:ãƒãƒ§ã‚¦/ã¯-ã‚‹,æ:ãƒ†ã‚¤/ã•-ã’ã‚‹,ç¨‹:ãƒ†ã‚¤/ã»ã©,é©:ãƒ†ã‚­,æ•µ:ãƒ†ã‚­/ã‹ãŸã,çµ±:ãƒˆã‚¦/ã™-ã¹ã‚‹,éŠ…:ãƒ‰ã‚¦,å°:ãƒ‰ã‚¦/ã¿ã¡ã³-ã,å¾³:ãƒˆã‚¯,ç‹¬:ãƒ‰ã‚¯/ã²ã¨-ã‚Š,ä»»:ãƒ‹ãƒ³/ã¾ã‹-ã›ã‚‹,ç‡ƒ:ãƒãƒ³/ã‚‚-ãˆã‚‹,èƒ½:ãƒã‚¦,ç ´:ãƒ/ã‚„ã¶-ã‚‹,çŠ¯:ãƒãƒ³/ãŠã‹-ã™,åˆ¤:ãƒãƒ³,ç‰ˆ:ãƒãƒ³,æ¯”:ãƒ’/ãã‚‰-ã¹ã‚‹,è‚¥:ãƒ’/ã“-ãˆã‚‹,é:ãƒ’,å‚™:ãƒ“/ããª-ãˆã‚‹,ä¿µ:ãƒ’ãƒ§ã‚¦/ãŸã‚ã‚‰,è©•:ãƒ’ãƒ§ã‚¦,è²§:ãƒ’ãƒ³/ã¾ãš-ã—ã„,å¸ƒ:ãƒ•/ã¬ã®,å©¦:ãƒ•,å¯Œ:ãƒ•/ã¨-ã‚€,æ­¦:ãƒ–,å¾©:ãƒ•ã‚¯,è¤‡:ãƒ•ã‚¯,ä»:ãƒ–ãƒ„/ã»ã¨ã‘,ç·¨:ãƒ˜ãƒ³/ã‚-ã‚€,å¼:ãƒ™ãƒ³,ä¿:ãƒ›/ãŸã‚‚-ã¤,å¢“:ãƒœ/ã¯ã‹,å ±:ãƒ›ã‚¦/ã‚€ã-ã„ã‚‹,è±Š:ãƒ›ã‚¦/ã‚†ãŸ-ã‹,é˜²:ãƒœã‚¦/ãµã›-ã,è²¿:ãƒœã‚¦,æš´:ãƒœã‚¦/ã‚ã°-ã‚Œã‚‹,å‹™:ãƒ /ã¤ã¨-ã‚ã‚‹,å¤¢:ãƒ /ã‚†ã‚,è¿·:ãƒ¡ã‚¤/ã¾ã‚ˆ-ã†,ç¶¿:ãƒ¡ãƒ³/ã‚ãŸ,è¼¸:ãƒ¦,ä½™:ãƒ¨/ã‚ã¾-ã‚‹,é :ãƒ¨/ã‚ãš-ã‘ã‚‹,å®¹:ãƒ¨ã‚¦,ç•¥:ãƒªãƒ£ã‚¯,ç•™:ãƒªãƒ¥ã‚¦/ã¨-ã¾ã‚‹,é ˜:ãƒªãƒ§ã‚¦",
            6: "ç•°:ã‚¤/ã“ã¨,éº:ã‚¤,åŸŸ:ã‚¤ã‚­,å®‡:ã‚¦,æ˜ :ã‚¨ã‚¤/ã†ã¤-ã‚‹,å»¶:ã‚¨ãƒ³/ã®-ã³ã‚‹,æ²¿:ã‚¨ãƒ³/ã-ã†,æˆ‘:ã‚¬/ã‚ã‚Œ,ç°:ã‚«ã‚¤/ã¯ã„,æ‹¡:ã‚«ã‚¯,é©:ã‚«ã‚¯/ã‹ã‚,é–£:ã‚«ã‚¯,å‰²:ã‚«ãƒ„/ã‚-ã‚‹,æ ª:ã‚«ãƒ–,å¹²:ã‚«ãƒ³/ã»-ã™,å·»:ã‚«ãƒ³/ã¾-ã,çœ‹:ã‚«ãƒ³,ç°¡:ã‚«ãƒ³,å±:ã‚­/ã‚ã¶-ãªã„,æœº:ã‚­/ã¤ããˆ,æ®:ã‚­,è²´:ã‚­/ã¨ã†ã¨-ã„,ç–‘:ã‚®/ã†ãŸãŒ-ã†,å¸:ã‚­ãƒ¥ã‚¦/ã™-ã†,ä¾›:ã‚­ãƒ§ã‚¦/ã¨ã‚‚,èƒ¸:ã‚­ãƒ§ã‚¦/ã‚€ã­,éƒ·:ã‚­ãƒ§ã‚¦,å‹¤:ã‚­ãƒ³/ã¤ã¨-ã‚ã‚‹,ç­‹:ã‚­ãƒ³/ã™ã˜,ç³»:ã‚±ã‚¤,æ•¬:ã‚±ã‚¤/ã†ã‚„ã¾-ã†,è­¦:ã‚±ã‚¤,åŠ‡:ã‚²ã‚­,æ¿€:ã‚²ã‚­/ã¯ã’-ã—ã„,ç©´:ã‚±ãƒ„/ã‚ãª,çµ¹:ã‚±ãƒ³/ãã¬,æ¨©:ã‚±ãƒ³,æ†²:ã‚±ãƒ³,æº:ã‚²ãƒ³/ã¿ãªã‚‚ã¨,å³:ã‚²ãƒ³/ãã³-ã—ã„,å·±:ã‚³/ãŠã®ã‚Œ,å‘¼:ã‚³/ã‚ˆ-ã¶,èª¤:ã‚´/ã‚ã‚„ã¾-ã‚‹,å:ã‚³ã‚¦,å­:ã‚³ã‚¦,çš‡:ã‚³ã‚¦,ç´…:ã‚³ã‚¦/ã¹ã«,é™:ã‚³ã‚¦/ãŠ-ã‚Šã‚‹,é‹¼:ã‚³ã‚¦/ã¯ãŒã­,åˆ»:ã‚³ã‚¯/ãã–-ã‚€,ç©€:ã‚³ã‚¯,éª¨:ã‚³ãƒ„/ã»ã­,å›°:ã‚³ãƒ³/ã“ã¾-ã‚‹,ç ‚:ã‚µ/ã™ãª,åº§:ã‚¶/ã™ã‚-ã‚‹,æ¸ˆ:ã‚µã‚¤/ã™-ã‚€,è£:ã‚µã‚¤/ã•ã°-ã,ç­–:ã‚µã‚¯,å†Š:ã‚µãƒ„,èš•:ã‚µãƒ³/ã‹ã„ã“,è‡³:ã‚·/ã„ãŸ-ã‚‹,ç§:ã‚·/ã‚ãŸã—,å§¿:ã‚·/ã™ãŒãŸ,è¦–:ã‚·,è©:ã‚·,èªŒ:ã‚·,ç£:ã‚¸,å°„:ã‚·ãƒ£/ã„-ã‚‹,æ¨:ã‚·ãƒ£/ã™-ã¦ã‚‹,å°º:ã‚·ãƒ£ã‚¯,è‹¥:ã‚¸ãƒ£ã‚¯/ã‚ã‹-ã„,æ¨¹:ã‚¸ãƒ¥,å:ã‚·ãƒ¥ã‚¦/ãŠã•-ã‚ã‚‹,å®—:ã‚·ãƒ¥ã‚¦,å°±:ã‚·ãƒ¥ã‚¦/ã¤-ã,è¡†:ã‚·ãƒ¥ã‚¦,å¾“:ã‚¸ãƒ¥ã‚¦/ã—ãŸãŒ-ã†,ç¸¦:ã‚¸ãƒ¥ã‚¦/ãŸã¦,ç¸®:ã‚·ãƒ¥ã‚¯/ã¡ã¢-ã‚€,ç†Ÿ:ã‚¸ãƒ¥ã‚¯/ã†-ã‚Œã‚‹,ç´”:ã‚¸ãƒ¥ãƒ³,å‡¦:ã‚·ãƒ§,ç½²:ã‚·ãƒ§,è«¸:ã‚·ãƒ§,é™¤:ã‚¸ãƒ§/ã®ã-ã,å°†:ã‚·ãƒ§ã‚¦,å‚·:ã‚·ãƒ§ã‚¦/ããš,éšœ:ã‚·ãƒ§ã‚¦/ã•ã‚-ã‚‹,åŸ:ã‚¸ãƒ§ã‚¦/ã—ã‚,è’¸:ã‚¸ãƒ§ã‚¦/ã‚€-ã™,é‡:ã‚·ãƒ³/ã¯ã‚Š,ä»:ã‚¸ãƒ³,å‚:ã‚¹ã‚¤/ãŸ-ã‚Œã‚‹,æ¨:ã‚¹ã‚¤/ãŠ-ã™,å¯¸:ã‚¹ãƒ³,ç››:ã‚»ã‚¤/ã‚‚-ã‚‹,è–:ã‚»ã‚¤,èª :ã‚»ã‚¤/ã¾ã“ã¨,å®£:ã‚»ãƒ³,å°‚:ã‚»ãƒ³/ã‚‚ã£ã±-ã‚‰,æ³‰:ã‚»ãƒ³/ã„ãšã¿,æ´—:ã‚»ãƒ³/ã‚ã‚‰-ã†,æŸ“:ã‚»ãƒ³/ã-ã‚ã‚‹,å–„:ã‚¼ãƒ³/ã‚ˆ-ã„,å¥:ã‚½ã‚¦/ã‹ãª-ã§ã‚‹,çª“:ã‚½ã‚¦/ã¾ã©,å‰µ:ã‚½ã‚¦/ã¤ã-ã‚‹,è£…:ã‚½ã‚¦/ã‚ˆããŠ-ã†,å±¤:ã‚½ã‚¦,æ“:ã‚½ã‚¦/ã‚ã‚„ã¤-ã‚‹,è”µ:ã‚¾ã‚¦/ãã‚‰,è‡“:ã‚¾ã‚¦,å­˜:ã‚¾ãƒ³,å°Š:ã‚½ãƒ³/ã¨ã†ã¨-ã„,å®…:ã‚¿ã‚¯,æ‹…:ã‚¿ãƒ³/ã‹ã¤-ã,æ¢:ã‚¿ãƒ³/ã•ãŒ-ã™,èª•:ã‚¿ãƒ³,æ®µ:ãƒ€ãƒ³,æš–:ãƒ€ãƒ³/ã‚ãŸãŸ-ã‹ã„,å€¤:ãƒ/ã‚ãŸã„,å®™:ãƒãƒ¥ã‚¦,å¿ :ãƒãƒ¥ã‚¦,è‘—:ãƒãƒ§/ã‚ã‚‰ã‚-ã™,åº:ãƒãƒ§ã‚¦,é ‚:ãƒãƒ§ã‚¦/ã„ãŸã ã,æ½®:ãƒãƒ§ã‚¦/ã—ãŠ,è³ƒ:ãƒãƒ³,ç—›:ãƒ„ã‚¦/ã„ãŸ-ã„,å±•:ãƒ†ãƒ³,è¨:ãƒˆã‚¦/ã†-ã¤,å…š:ãƒˆã‚¦,ç³–:ãƒˆã‚¦,å±Š:ãƒˆãƒ‰/ã¨ã©-ã,é›£:ãƒŠãƒ³/ã‚€ãšã‹-ã—ã„,ä¹³:ãƒ‹ãƒ¥ã‚¦/ã¡ã¡,èª:ãƒ‹ãƒ³/ã¿ã¨-ã‚ã‚‹,ç´:ãƒã‚¦/ãŠã•-ã‚ã‚‹,è„³:ãƒã‚¦,æ´¾:ãƒ,æ‹:ãƒã‚¤/ãŠãŒ-ã‚€,èƒŒ:ãƒã‚¤/ã›,è‚º:ãƒã‚¤,ä¿³:ãƒã‚¤,ç­:ãƒãƒ³,æ™©:ãƒãƒ³,å¦:ãƒ’,æ‰¹:ãƒ’,ç§˜:ãƒ’/ã²-ã‚ã‚‹,è…¹:ãƒ•ã‚¯/ã¯ã‚‰,å¥®:ãƒ•ãƒ³/ãµã‚‹-ã†,ä¸¦:ãƒ˜ã‚¤/ãªã‚‰-ã¶,é™›:ãƒ˜ã‚¤,é–‰:ãƒ˜ã‚¤/ã—-ã‚ã‚‹,ç‰‡:ãƒ˜ãƒ³/ã‹ãŸ,è£œ:ãƒ›/ãŠããª-ã†,æš®:ãƒœ/ã-ã‚‰ã™,å®:ãƒ›ã‚¦/ãŸã‹ã‚‰,è¨ª:ãƒ›ã‚¦/ãŠã¨ãš-ã‚Œã‚‹,äº¡:ãƒœã‚¦/ãª-ã,å¿˜:ãƒœã‚¦/ã‚ã™-ã‚Œã‚‹,æ£’:ãƒœã‚¦,æš:ãƒã‚¤,å¹•:ãƒã‚¯,å¯†:ãƒŸãƒ„,ç›Ÿ:ãƒ¡ã‚¤,æ¨¡:ãƒ¢,è¨³:ãƒ¤ã‚¯/ã‚ã‘,éƒµ:ãƒ¦ã‚¦,å„ª:ãƒ¦ã‚¦/ã‚„ã•-ã—ã„,å¹¼:ãƒ¨ã‚¦/ãŠã•ãª-ã„,æ¬²:ãƒ¨ã‚¯/ã»ã£-ã™ã‚‹,ç¿Œ:ãƒ¨ã‚¯,ä¹±:ãƒ©ãƒ³/ã¿ã -ã‚Œã‚‹,åµ:ãƒ©ãƒ³/ãŸã¾ã”,è¦§:ãƒ©ãƒ³,è£:ãƒª/ã†ã‚‰,å¾‹:ãƒªãƒ„,è‡¨:ãƒªãƒ³/ã®ã-ã‚€,æœ—:ãƒ­ã‚¦/ã»ãŒ-ã‚‰ã‹,è«–:ãƒ­ãƒ³"
        };

        // --- ãƒ‡ãƒ¼ã‚¿å±•é–‹ ---
        function parseCompressedData(grade, compressedString) {
            return compressedString.split(',').map(item => {
                const [char, reading] = item.split(':');
                return { char, reading };
            });
        }
        const allKanjiData = {};
        for (let g = 1; g <= 6; g++) {
            if (compressedKanjiData[g]) {
                allKanjiData[g] = parseCompressedData(g, compressedKanjiData[g]);
            }
        }

        // --- åŠ¹æœéŸ³ã‚·ã‚¹ãƒ†ãƒ  ---
        let audioContext;
        function playSound(type) {
            if (!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const now = audioContext.currentTime;
            
            // æ±ç”¨ç™ºæŒ¯å™¨
            const createOsc = (freq, type, dur, vol = 0.1) => {
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, now);
                gain.gain.setValueAtTime(vol, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + dur);
                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.start(now);
                osc.stop(now + dur);
            };

            switch(type) {
                case 'success': createOsc(800, 'sine', 0.2); break;
                case 'click': createOsc(400, 'triangle', 0.1, 0.05); break;
                case 'error': createOsc(150, 'sawtooth', 0.3); break;
                case 'complete': 
                    createOsc(500, 'sine', 0.1); 
                    setTimeout(() => createOsc(800, 'sine', 0.3), 100);
                    break;
                case 'levelup': // ãƒ•ã‚¡ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ¬
                    const melody = [523, 659, 783, 1046, 783, 1046];
                    melody.forEach((f, i) => {
                        const o = audioContext.createOscillator();
                        const g = audioContext.createGain();
                        o.type = 'square';
                        o.frequency.value = f;
                        g.gain.setValueAtTime(0.1, now + i*0.1);
                        g.gain.exponentialRampToValueAtTime(0.01, now + i*0.1 + 0.3);
                        o.connect(g);
                        g.connect(audioContext.destination);
                        o.start(now + i*0.1);
                        o.stop(now + i*0.1 + 0.3);
                    });
                    break;
            }
        }

        // --- çŠ¶æ…‹ç®¡ç† ---
        let progressPractice = JSON.parse(localStorage.getItem('kanjiMasterPractice')) || {};
        let progressTest = JSON.parse(localStorage.getItem('kanjiMasterTest')) || {};
        let writer;
        let currentChar = null;
        let currentMode = 'practice';
        let currentGrade = 1;
        
        // ãƒ¬ãƒ™ãƒ«è¨ˆç®—å®šæ•°
        const XP_PER_LEVEL = 5;

        // --- é€²åŒ–ãƒ»ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ  ---
        function getStats() {
            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚­ãƒ¼æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            const practiceCount = Object.keys(progressPractice).length;
            const testCount = Object.keys(progressTest).length;
            const totalXP = practiceCount + testCount;
            
            const level = Math.floor(totalXP / XP_PER_LEVEL) + 1;
            const currentLevelXP = totalXP % XP_PER_LEVEL;
            const nextLevelXP = XP_PER_LEVEL - currentLevelXP;
            
            return { level, totalXP, currentLevelXP, nextLevelXP };
        }

        function getMascot(level) {
            // 5ãƒ¬ãƒ™ãƒ«ã”ã¨ã«é€²åŒ–
            if (level < 5) return "ğŸ¥š";   // åµ
            if (level < 10) return "ğŸ£";  // ãƒ’ãƒ¨ã‚³
            if (level < 15) return "ğŸ¥";  // ãƒ’ãƒ¨ã‚³ï¼ˆæˆé•·ï¼‰
            if (level < 20) return "ğŸ“";  // ãƒ‹ãƒ¯ãƒˆãƒª
            if (level < 25) return "ğŸ¦‰";  // ãƒ•ã‚¯ãƒ­ã‚¦ï¼ˆåšå£«ï¼‰
            if (level < 30) return "ğŸ¦…";  // ãƒ¯ã‚·
            if (level < 35) return "ğŸ¦";  // ãƒ©ã‚¤ã‚ªãƒ³
            if (level < 40) return "ğŸ¦„";  // ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³
            if (level < 50) return "ğŸ‰";  // ãƒ‰ãƒ©ã‚´ãƒ³
            return "ğŸ¤´";                  // ã‹ã‚“ã˜ãƒã‚¹ã‚¿ãƒ¼ï¼ˆç¥ï¼‰
        }

        // ç”»é¢æ›´æ–°
        function updateUI() {
            const stats = getStats();
            const mascot = getMascot(stats.level);
            
            // ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
            document.getElementById('title-mascot').innerText = mascot;
            document.getElementById('title-level').innerText = `Lv.${stats.level}`;

            // ãƒªã‚¹ãƒˆç”»é¢
            document.getElementById('list-mascot').innerText = mascot;
            document.getElementById('list-level').innerText = `Lv.${stats.level}`;
            document.getElementById('next-xp').innerText = stats.nextLevelXP;
            
            // ã‚²ãƒ¼ã‚¸æ›´æ–°
            const percent = (stats.currentLevelXP / XP_PER_LEVEL) * 100;
            document.getElementById('xp-bar').style.width = `${percent}%`;
        }

        // å­¦å¹´åˆ‡ã‚Šæ›¿ãˆï¼ˆå†…éƒ¨ï¼‰
        function setGrade(grade) {
            playSound('click');
            currentGrade = grade;
            updateTitleGradeButtons();
        }

        // ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã®ãƒœã‚¿ãƒ³è¡¨ç¤ºã‚’ç¾åœ¨ã®å­¦å¹´ã«åˆã‚ã›ã‚‹
        function updateTitleGradeButtons() {
            document.querySelectorAll('.grade-btn').forEach(btn => {
                btn.classList.toggle('selected', parseInt(btn.innerText) === currentGrade);
            });
        }

        // ç”»é¢é·ç§»
        function showScreen(screenId) {
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆæˆ»ã‚‹æŒ™å‹•ã®æ”¹å–„ï¼‰
            window.scrollTo(0, 0);

            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            
            // ç”»é¢ã”ã¨ã®åˆæœŸå‡¦ç†
            if (screenId === 'list-screen') {
                renderList();
            } else if (screenId === 'title-screen') {
                // ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã£ãŸã‚‰æ¤œç´¢çª“ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãŠã
                document.getElementById('home-search-input').value = '';
                document.getElementById('search-box').value = '';
                
                // æ¤œç´¢ã§å­¦å¹´ãŒå¤‰ã‚ã£ã¦ã„ã‚‹å ´åˆãŒã‚ã‚‹ã®ã§ãƒœã‚¿ãƒ³ã‚’æ›´æ–°
                updateTitleGradeButtons();
                updateUI();
            }
        }

        // ãƒ›ãƒ¼ãƒ æ¤œç´¢æ©Ÿèƒ½
        function handleHomeSearch() {
            const query = document.getElementById('home-search-input').value;
            if (!query) return;

            // æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚¹ãƒˆç”»é¢ã®æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«æ¸¡ã™
            document.getElementById('search-box').value = query;
            
            // ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰æ‰±ã„ã§ãƒªã‚¹ãƒˆã¸é·ç§»
            currentMode = 'practice';
            playSound('click');
            showScreen('list-screen');
            
            // ãƒªã‚¹ãƒˆç”»é¢ã®æ¤œç´¢å‡¦ç†ã‚’å®Ÿè¡Œ
            filterList();
        }

        // ãƒ¢ãƒ¼ãƒ‰é¸æŠ
        function selectMode(mode) {
            playSound('click');
            currentMode = mode;
            // ãƒ¢ãƒ¼ãƒ‰é¸æŠæ™‚ã¯æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã‚’ç©ºã«ã™ã‚‹
            document.getElementById('search-box').value = '';
            showScreen('list-screen');
        }

        // æ¤œç´¢ãƒ»ãƒªã‚¹ãƒˆæç”»
        function filterList() {
            renderList();
        }

        function renderList() {
            updateUI(); // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
            
            const searchText = document.getElementById('search-box').value.trim();
            const grid = document.getElementById('kanji-grid');
            const badge = document.getElementById('mode-display');
            
            // ãƒãƒƒã‚¸æ›´æ–°
            if (currentMode === 'practice') {
                badge.innerText = searchText ? `ãœã‚“ãŒãã­ã‚“ãƒ»ã‚Œã‚“ã—ã‚…ã†` : `${currentGrade}ã­ã‚“ã›ã„ãƒ»ã‚Œã‚“ã—ã‚…ã†`;
                badge.style.backgroundColor = "#4CAF50";
            } else {
                badge.innerText = searchText ? `ãœã‚“ãŒãã­ã‚“ãƒ»ãƒ†ã‚¹ãƒˆ` : `${currentGrade}ã­ã‚“ã›ã„ãƒ»ãƒ†ã‚¹ãƒˆ`;
                badge.style.backgroundColor = "#EF5350";
            }

            // --- å…¨å­¦å¹´æ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯ ---
            let filtered = [];

            if (searchText) {
                // æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ãŒã‚ã‚‹å ´åˆï¼š1ã€œ6å¹´ç”Ÿã™ã¹ã¦ã‚’ãƒ«ãƒ¼ãƒ—ã—ã¦æ¢ã™
                for (let g = 1; g <= 6; g++) {
                    if (allKanjiData[g]) {
                        const matches = allKanjiData[g].filter(item => 
                            item.char.includes(searchText) || (item.reading && item.reading.includes(searchText))
                        );
                        // è¦‹ã¤ã‹ã£ãŸæ¼¢å­—ã«ã€Œå­¦å¹´ãƒ‡ãƒ¼ã‚¿ã€ã‚’ä¸€æ™‚çš„ã«ãã£ã¤ã‘ã‚‹
                        matches.forEach(m => m._foundGrade = g);
                        filtered = filtered.concat(matches);
                    }
                }
            } else {
                // æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ãŒãªã„å ´åˆï¼šã„ã¾é¸ã‚“ã§ã„ã‚‹å­¦å¹´ã ã‘
                if (allKanjiData[currentGrade]) {
                    filtered = allKanjiData[currentGrade];
                    filtered.forEach(m => m._foundGrade = currentGrade);
                }
            }

            grid.innerHTML = '';
            if (filtered.length === 0) {
                grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#888;">ã¿ã¤ã‹ã‚Šã¾ã›ã‚“...<br>(ã„ã¾ã® ãŒãã­ã‚“ ã«ã¯ ãªã„ã‹ã‚‚ï¼Ÿ)</div>';
                return;
            }

            const targetProgress = (currentMode === 'practice') ? progressPractice : progressTest;

            filtered.forEach(item => {
                const card = document.createElement('div');
                card.className = 'kanji-card';
                
                // ã‚¯ãƒªã‚¢æ¸ˆã¿ãƒã‚§ãƒƒã‚¯
                const isCleared = targetProgress[item.char];
                
                let badgeHtml = '';
                if (progressPractice[item.char]) badgeHtml += `<div class="mark-badge cleared-practice" style="display:flex;right:auto;left:-5px;"><span class="star-mark">â­</span></div>`;
                if (progressTest[item.char]) badgeHtml += `<div class="mark-badge cleared-test" style="display:flex;"><span class="crown-mark">ğŸ‘‘</span></div>`;
                
                if (isCleared) {
                    card.classList.add(currentMode === 'practice' ? 'cleared-practice' : 'cleared-test');
                }

                // æ¤œç´¢æ™‚ã¯ä½•å¹´ç”Ÿã®æ¼¢å­—ã‹åˆ†ã‹ã‚‹ã‚ˆã†ã«å°ã•ãè¡¨ç¤º
                const gradeLabel = searchText ? `<span style="position:absolute; bottom:2px; right:5px; font-size:0.6rem; color:#888;">${item._foundGrade}å¹´</span>` : '';

                card.innerHTML = `${item.char}${badgeHtml}${gradeLabel}`;
                
                card.onclick = () => { 
                    playSound('click'); 
                    // æ¤œç´¢ã§é•ã†å­¦å¹´ã®æ¼¢å­—ã‚’é¸ã‚“ã å ´åˆã€ãã®å­¦å¹´ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
                    if (item._foundGrade) {
                        currentGrade = item._foundGrade; 
                    }
                    startApp(item); 
                };
                grid.appendChild(card);
            });
        }

        // --- æ¼¢å­—æ›¸ãå–ã‚Šã‚¢ãƒ—ãƒªæœ¬ä½“ ---
        function startApp(item) {
            currentChar = item;
            const screen = document.getElementById('practice-screen');
            screen.classList.toggle('test-mode', currentMode === 'test');
            showScreen('practice-screen');
            
            // è¡¨ç¤ºãƒªã‚»ãƒƒãƒˆ
            document.getElementById('result-overlay').classList.remove('active');
            document.getElementById('levelup-overlay').classList.remove('active');
            
            const msgArea = document.getElementById('message-area');
            const readingDisplay = document.getElementById('current-reading');
            
            if (currentMode === 'test') {
                msgArea.innerText = "ã“ã® ã‹ã‚“ã˜ ã‚’ ã‹ã“ã†ï¼";
                msgArea.style.color = "#D32F2F";
                readingDisplay.innerText = item.reading ? item.reading.split('/')[0] : "ï¼ˆã‚ˆã¿ãªã—ï¼‰";
            } else {
                msgArea.innerText = "ã†ã™ã„ã›ã‚“ã‚’ ãªãã‚ã†ï¼";
                msgArea.style.color = "#006064";
                readingDisplay.innerText = `${item.char} (${item.reading || ''})`;
            }

            document.getElementById('character-target').innerHTML = '';

            writer = HanziWriter.create('character-target', item.char, {
                width: 300, height: 300, padding: 10,
                showOutline: (currentMode === 'practice'), 
                strokeAnimationSpeed: 1, 
                delayBetweenStrokes: 200,
                radicalColor: '#168F16', 
                drawingWidth: 25, 
                outlineColor: '#DDD',
                strokeColor: '#333', 
                highlightColor: '#FF7043', 
                showHintAfterMisses: 1,
                charDataLoader: (char, onComplete) => {
                    fetch(`https://cdn.jsdelivr.net/gh/chanind/hanzi-writer-data-jp@master/data/${char}.json`)
                    .then(r => r.json()).then(onComplete)
                    .catch(() => {
                        fetch(`https://cdn.jsdelivr.net/npm/hanzi-writer-data@2.0/${char}.json`)
                        .then(r => r.json()).then(onComplete);
                    });
                }
            });
            writer.quiz({
                onMistake: () => { playSound('error'); document.getElementById('message-area').innerText = "ãŠã—ã„ï¼ã“ã“ã ã‚ˆ"; },
                onCorrectStroke: () => { playSound('success'); document.getElementById('message-area').innerText = "ã„ã„ãï¼"; },
                onComplete: handleComplete
            });
        }

        function handleComplete() {
            playSound('complete');
            const msg = document.getElementById('result-msg');
            const icon = document.getElementById('result-icon');
            const isPractice = (currentMode === 'practice');
            const targetStorage = isPractice ? progressPractice : progressTest;
            const storageKey = isPractice ? 'kanjiMasterPractice' : 'kanjiMasterTest';

            // ã™ã§ã«ã‚¯ãƒªã‚¢æ¸ˆã¿ã‹ã©ã†ã‹ç¢ºèªï¼ˆçµŒé¨“å€¤åŠ ç®—ã®ãŸã‚ï¼‰
            const isFirstClear = !targetStorage[currentChar.char];

            // ãƒ‡ãƒ¼ã‚¿ä¿å­˜
            targetStorage[currentChar.char] = true;
            localStorage.setItem(storageKey, JSON.stringify(targetStorage));

            // ãƒ¢ãƒ¼ãƒ€ãƒ«è¨­å®š
            if (isPractice) {
                msg.innerText = "ã§ããŸãƒ¼ï¼";
                msg.style.color = "#4CAF50";
                icon.innerText = "â­";
            } else {
                msg.innerText = "ã ã„ã›ã„ã‹ã„ï¼";
                msg.style.color = "#F44336";
                icon.innerText = "ğŸ‘‘";
            }

            // çµæœç”»é¢è¡¨ç¤º
            setTimeout(() => {
                document.getElementById('result-overlay').classList.add('active');
                
                // åˆå›ã‚¯ãƒªã‚¢ãªã‚‰ãƒ¬ãƒ™ãƒ«ãƒã‚§ãƒƒã‚¯
                if (isFirstClear) {
                    checkLevelUp();
                }
            }, 800);
        }

        function checkLevelUp() {
            // ç¾åœ¨ã®çµŒé¨“å€¤ã‚’å–å¾—ï¼ˆã“ã®æ™‚ç‚¹ã§ã‚»ãƒ¼ãƒ–æ¸ˆã¿ï¼‰
            const stats = getStats();
            
            // ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã—ãŸã‹åˆ¤å®šï¼ˆä½™ã‚ŠãŒ0ã«ãªã£ãŸï¼5ã®å€æ•°ã«é”ã—ãŸï¼‰
            if (stats.totalXP > 0 && stats.totalXP % XP_PER_LEVEL === 0) {
                setTimeout(() => {
                    // ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ¼”å‡º
                    playSound('levelup');
                    document.getElementById('result-overlay').classList.remove('active'); // çµæœç”»é¢æ¶ˆã™
                    document.getElementById('levelup-overlay').classList.add('active'); // ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ç”»é¢å‡ºã™
                    document.getElementById('new-level-num').innerText = stats.level;
                    document.getElementById('levelup-mascot').innerText = getMascot(stats.level);
                }, 1000);
            }
        }

        function closeLevelUp() {
            document.getElementById('levelup-overlay').classList.remove('active');
            goNext();
        }

        function goNext() {
            const list = allKanjiData[currentGrade];
            const idx = list.findIndex(k => k.char === currentChar.char);
            if (idx >= 0 && idx < list.length - 1) {
                startApp(list[idx + 1]);
            } else {
                showScreen('list-screen');
            }
        }
        function retry() { startApp(currentChar); }

        function resetData() {
            if(confirm("ã»ã‚“ã¨ã†ã« ãƒ‡ãƒ¼ã‚¿ã‚’ ã‘ã—ã¾ã™ã‹ï¼Ÿ\nãƒ¬ãƒ™ãƒ«ã‚‚ 1 ã« ã‚‚ã©ã‚Šã¾ã™ã€‚")) {
                localStorage.removeItem('kanjiMasterPractice');
                localStorage.removeItem('kanjiMasterTest');
                progressPractice = {};
                progressTest = {};
                location.reload();
            }
        }

        // åˆæœŸåŒ–
        updateUI();
    </script>
</body>
</html>
