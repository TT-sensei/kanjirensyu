<!doctype html>
<html lang="ja">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ã‹ã‚“ã˜ãƒã‚¹ã‚¿ãƒ¼ãƒ»ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ</title>
  <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru:wght@400;700&display=swap');

        :root {
            --primary: #FF1493;
            --secondary: #00D084;
            --accent: #00BFFF;
            --accent2: #FFD700;
            --accent3: #FF6B35;
            --accent4: #9B59B6;
            --bg-light: #FFF8F0;
            --text: #2D1B3D;
            --shadow-pop: 0 8px 0 rgba(0,0,0,0.15);
            --shadow-soft: 0 4px 12px rgba(0,0,0,0.08);
        }

        html, body {
            font-family: 'Kosugi Maru', sans-serif;
            background: linear-gradient(135deg, #FFE5EC 0%, #E0F7FF 50%, #E5FFE5 100%);
            color: var(--text);
            margin: 0;
            padding: 0;
            text-align: center;
            user-select: none;
            overflow-x: hidden;
            touch-action: manipulation;
            width: 100%;
            height: 100%;
        }

        /* ç”»é¢å…±é€šè¨­å®š */
        .screen {
            display: none;
            padding: 20px;
            min-height: 100vh;
            box-sizing: border-box;
            animation: fadeIn 0.3s;
        }
        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ */
        #title-screen {
            background: linear-gradient(180deg, #FFE5EC 0%, #E0F7FF 50%, #E5FFE5 100%);
            padding-top: 40px;
            padding-bottom: 50px;
        }

        h1 {
            font-size: 3rem;
            margin: 0;
            background: linear-gradient(90deg, var(--primary), var(--accent3), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .mascot-area {
            font-size: 6rem;
            margin: 20px 0;
            animation: bounce 2s infinite;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }

        .menu-btn {
            display: block;
            width: 85%;
            max-width: 320px;
            margin: 12px auto;
            padding: 18px;
            font-size: 1.4rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: var(--shadow-pop);
            transition: all 0.1s;
            font-family: inherit;
            font-weight: 700;
            position: relative;
            overflow: hidden;
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.3);
            transition: left 0.3s;
        }

        .menu-btn:hover::before {
            left: 100%;
        }

        .menu-btn:active {
            transform: translateY(7px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.15);
        }

        .btn-practice { 
            background: linear-gradient(135deg, #00D084, #00E5A0);
            color: white;
        }
        .btn-test { 
            background: linear-gradient(135deg, #FF1493, #FF69B4);
            color: white;
        }
        
        /* å­¦å¹´é¸æŠãƒœã‚¿ãƒ³ */
        .grade-selector {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        .grade-btn {
            width: 75px;
            height: 75px;
            border-radius: 20px;
            border: 4px solid white;
            background: rgba(255,255,255,0.5);
            color: var(--text);
            font-size: 0.8rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            transition: all 0.2s;
            font-family: inherit;
            box-shadow: var(--shadow-soft);
        }
        .grade-btn-icon {
            font-size: 2rem;
        }
        .grade-btn.selected {
            background: white;
            transform: scale(1.15) rotateZ(-3deg);
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.4);
            border-color: var(--primary);
        }

        /* æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ï¼ˆãƒ›ãƒ¼ãƒ ç”¨ï¼‰ */
       .home-search-box {
    margin: 20px auto;
    width: 85%;
    max-width: 340px;
    display: flex;
    gap: 8px;
    /* ã¯ã¿å‡ºã—é˜²æ­¢ã®å¿µæŠ¼ã— */
    box-sizing: border-box; 
}

/* å…¥åŠ›æ¬„ */
.home-search-box input {
    flex: 1;
    /* â–¼â–¼â–¼ ã“ã‚ŒãŒãªã„ã¨ã‚¹ãƒãƒ›ã§ã¯ã¿å‡ºã—ã¾ã™ â–¼â–¼â–¼ */
    box-sizing: border-box; 
    min-width: 0; /* ã“ã‚Œã‚‚é‡è¦ï¼ç„¡ç†ã‚„ã‚Šç¸®ã‚ã‚‹è¨­å®š */
    
    padding: 12px;
    border-radius: 25px;
    border: 3px solid white;
    font-size: 1rem;
    text-align: center;
    background: white;
    box-shadow: var(--shadow-soft);
    color: var(--text);
    font-family: inherit;
}

/* ãƒœã‚¿ãƒ³ */
.home-search-box button {
    /* â–¼â–¼â–¼ ãƒœã‚¿ãƒ³ã«ã‚‚åŒã˜ãŠã¾ã˜ãªã„ã‚’è¿½åŠ  â–¼â–¼â–¼ */
    box-sizing: border-box;
    
    background: linear-gradient(135deg, var(--accent), #00E5FF);
    color: white;
    border: 3px solid transparent; /* é«˜ã•åˆã‚ã›ç”¨ */
    border-radius: 25px;
    padding: 12px 20px;
    cursor: pointer;
    font-weight: 700;
    box-shadow: var(--shadow-pop);
    font-family: inherit;
    flex-shrink: 0; /* ãƒœã‚¿ãƒ³ã¯ç¸®ã¾ã›ãªã„ */
    line-height: normal;
}
        .home-search-box input {
            flex: 1;
            padding: 12px;
            border-radius: 25px;
            border: 3px solid white;
            font-size: 1rem;
            text-align: center;
            background: white;
            box-shadow: var(--shadow-soft);
            color: var(--text);
            font-family: inherit;
        }
        .home-search-box input::placeholder {
            color: #CCC;
        }
        .home-search-box button {
            background: linear-gradient(135deg, var(--accent), #00E5FF);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 0 20px;
            cursor: pointer;
            font-weight: 700;
            box-shadow: var(--shadow-pop);
            font-family: inherit;
        }
        .home-search-box button:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.15);
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ãƒ»ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ */
        .footer-note, .app-credits-container {
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            color: var(--text);
            border-radius: 20px;
            text-align: left;
            font-size: 0.9rem;
            width: 90%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            box-sizing: border-box;
            box-shadow: var(--shadow-soft);
            border: 3px solid white;
        }
        
        .footer-note strong { 
            background: linear-gradient(90deg, var(--primary), var(--accent3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .credit-warning-box {
            border: 3px solid var(--accent3);
            background: #FFF5E5;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        .credit-warning-title { 
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--accent3);
        }
        
        .credit-section-title {
            font-size: 1.1rem;
            border-bottom: 3px solid var(--accent2);
            padding-bottom: 8px;
            margin-top: 20px;
            font-weight: 700;
        }

        .credit-list {
            list-style: none;
            padding: 0;
        }
        .credit-item { margin-bottom: 15px; }
        .credit-name { font-weight: 700; color: var(--text); }
        .credit-desc { font-size: 0.8rem; color: #666; line-height: 1.4; margin-left: 10px; }
        .credit-link { color: var(--accent); }

        /* ãƒªã‚¹ãƒˆç”»é¢ */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 20px;
            box-shadow: var(--shadow-soft);
            border: 3px solid white;
        }

        .back-btn {
            background: linear-gradient(135deg, #9E9E9E, #B0BEC5);
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            box-shadow: 0 3px 0 rgba(0,0,0,0.1);
            transition: all 0.1s;
            font-family: inherit;
        }
        .back-btn:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 rgba(0,0,0,0.1);
        }

        .search-area {
            margin-bottom: 20px;
        }
        #search-box {
            width: 75%;
            max-width: 240px;
            padding: 10px;
            font-size: 0.95rem;
            border: 3px solid var(--primary);
            border-radius: 20px;
            text-align: center;
            background: white;
            color: var(--text);
            box-shadow: var(--shadow-soft);
            font-family: inherit;
        }
        #search-box::placeholder {
            color: #DDD;
        }

        .kanji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
            gap: 12px;
            padding-bottom: 50px;
        }

        .kanji-card {
            background: white;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.8rem;
            border-radius: 18px;
            box-shadow: var(--shadow-pop);
            cursor: pointer;
            position: relative;
            border: 3px solid transparent;
            transition: all 0.1s;
            font-weight: 700;
        }
        .kanji-card:active { 
            transform: scale(0.92);
            box-shadow: 0 2px 0 rgba(0,0,0,0.1);
        }
        
        .kanji-card.cleared-practice { 
            border-color: var(--secondary);
            background: linear-gradient(135deg, #E5FFF5, #F0FFFA);
            box-shadow: 0 0 15px rgba(0, 208, 132, 0.3);
        }
        .kanji-card.cleared-test { 
            border-color: var(--primary);
            background: linear-gradient(135deg, #FFE5F5, #FFF0F7);
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.3);
        }

        .mark-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            border: 3px solid white;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        .cleared-practice .star-mark { 
            background: linear-gradient(135deg, var(--accent2), #FFE700);
            border-radius: 50%;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .cleared-test .crown-mark { 
            background: linear-gradient(135deg, var(--primary), #FF69B4);
            border-radius: 50%;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ç·´ç¿’ç”»é¢ */
        #practice-area {
            background: white;
            border-radius: 25px;
            padding: 25px;
            box-shadow: var(--shadow-soft);
            display: inline-block;
            margin-top: 20px;
            position: relative;
            border: 4px solid white;
        }
        #character-target {
            touch-action: none;
        }

        .controls {
            margin-top: 25px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .control-btn {
            background: linear-gradient(135deg, var(--accent), #00E5FF);
            color: white;
            border: none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: var(--shadow-pop);
            transition: all 0.1s;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .control-btn:active {
            transform: translateY(7px);
            box-shadow: 0 2px 0 #1976D2;
        }

        .control-btn:nth-child(2) {
            background: linear-gradient(135deg, var(--accent3), #FF8555);
        }
        .control-btn:nth-child(2):active {
            box-shadow: 0 2px 0 rgba(255, 107, 53, 0.5);
        }

        /* ãƒ¬ãƒ™ãƒ«ãƒ»çµŒé¨“å€¤ãƒãƒ¼ */
        .xp-container {
            width: 90%;
            max-width: 420px;
            height: 24px;
            background: white;
            border-radius: 15px;
            margin: 15px auto;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
            border: 3px solid #E0E0E0;
        }
        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), #00E5A0);
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: inset -2px 0 4px rgba(0,0,0,0.1);
        }

        /* çµæœã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        .overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    display: none;
    z-index: 100;
    flex-direction: column;
    color: white;
    backdrop-filter: blur(3px);
    box-sizing: border-box; /* 
    /* 1. å·¦å³ã‚’ã€Œä¸­å¤®ã€ã«æˆ»ã—ã¾ã™ï¼ˆã“ã‚Œã§å·¦ç«¯ã«è¡Œã‹ãªããªã‚Šã¾ã™ï¼‰ */
    align-items: center;

    justify-content: flex-start;

    /* 3. ä¸Šã‹ã‚‰ã®ä½™ç™½ï¼ˆã“ã“ã‚’æ•°å­—ã§èª¿æ•´ã—ã¦ãã ã•ã„ï¼‰ */
    padding-top: 100px;
    /* â€»Googleã‚µã‚¤ãƒˆã®åŸ‹ã‚è¾¼ã¿æ ã‹ã‚‰ã¯ã¿å‡ºãªã„ã‚ˆã†ã«è¨­å®š */
    box-sizing: border-box;
        }
        .overlay.active { display: flex; animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
        
        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .result-content {
            background: white;
            color: var(--text);
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 85%;
            max-width: 320px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            border: 4px solid white;
        }
        .big-icon { font-size: 6rem; margin: 15px 0; animation: popBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        
        @keyframes popBounce {
            0% { transform: scale(0) rotateZ(-20deg); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1) rotateZ(0deg); }
        }

        .result-content h2 {
            font-size: 2rem;
            margin: 10px 0;
            font-weight: 700;
        }

        .next-btn {
            background: linear-gradient(135deg, var(--primary), #FF69B4);
            color: white;
            border: none;
            padding: 16px 36px;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 15px;
            box-shadow: var(--shadow-pop);
            font-weight: 700;
            font-family: inherit;
            transition: all 0.1s;
        }
        .next-btn:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.15);
        }

        .retry-btn {
            background: none;
            border: 2px solid #DDD;
            color: #999;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 10px;
            font-family: inherit;
            font-size: 0.95rem;
        }

        /* ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ç‰¹åˆ¥æ¼”å‡º */
        #levelup-overlay {
            background: rgba(255, 20, 147, 0.95);
        }
        .levelup-anim {
            font-size: 7rem;
            animation: spin 1s infinite linear;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        #levelup-overlay .result-content {
            background: linear-gradient(135deg, #FFE5EC, #E0F7FF);
            color: var(--text);
            border-color: var(--primary);
        }

        #levelup-overlay h2 {
            background: linear-gradient(90deg, var(--primary), var(--accent3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ãƒªã‚»ãƒƒãƒˆç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« */
        .confirm-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 200;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            backdrop-filter: blur(3px);
        }
        .confirm-modal.active {
            display: flex;
        }
        .confirm-content {
            background: white;
            color: var(--text);
            padding: 35px;
            border-radius: 25px;
            text-align: center;
            width: 85%;
            max-width: 300px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            border: 4px solid white;
        }
        .confirm-btn {
            width: 100%;
            padding: 14px;
            margin-top: 12px;
            border: none;
            border-radius: 18px;
            font-size: 1rem;
            cursor: pointer;
            font-family: inherit;
            font-weight: 700;
            box-shadow: var(--shadow-pop);
            transition: all 0.1s;
        }
        .confirm-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.1);
        }
        .confirm-btn-yes {
            background: linear-gradient(135deg, #FF6B6B, #FF5252);
            color: white;
        }
        .confirm-btn-no {
            background: linear-gradient(135deg, #B0BEC5, #90A4AE);
            color: white;
        }

        #mode-display {
            padding: 8px 20px;
            border-radius: 20px;
            color: white;
            font-size: 0.95rem;
            font-weight: 700;
            box-shadow: var(--shadow-soft);
            display: inline-block;
        }

        #message-area {
            margin: 15px 0;
            font-size: 1.3rem;
            font-weight: 700;
            min-height: 30px;
        }

        #current-reading {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .reset-link {
            margin-top: 20px;
            font-size: 0.85rem;
        }

        .reset-link span {
            color: var(--primary);
            text-decoration: underline;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.2s;
        }

        .reset-link span:hover {
            transform: scale(1.1);
        }

    </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="https://cdn.tailwindcss.com/3.4.17" type="text/javascript"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body>
  <div id="title-screen" class="screen active">
   <h1>ğŸŒŸ ã‹ã‚“ã˜ãƒã‚¹ã‚¿ãƒ¼</h1>
   <div class="mascot-area" id="title-mascot">
    ğŸ¥š
   </div>
   <div style="font-size:1.3rem; margin-bottom:15px; font-weight:700;">
    Lv.<span id="title-level">1</span>
   </div>
   <div class="grade-selector"><button class="grade-btn selected" onclick="setGrade(1)">
     <div class="grade-btn-icon">
      ğŸ“š
     </div>
     <div>
      1å¹´
     </div></button> <button class="grade-btn" onclick="setGrade(2)">
     <div class="grade-btn-icon">
      ğŸ“–
     </div>
     <div>
      2å¹´
     </div></button> <button class="grade-btn" onclick="setGrade(3)">
     <div class="grade-btn-icon">
      âœï¸
     </div>
     <div>
      3å¹´
     </div></button> <button class="grade-btn" onclick="setGrade(4)">
     <div class="grade-btn-icon">
      ğŸ“
     </div>
     <div>
      4å¹´
     </div></button> <button class="grade-btn" onclick="setGrade(5)">
     <div class="grade-btn-icon">
      ğŸ–Šï¸
     </div>
     <div>
      5å¹´
     </div></button> <button class="grade-btn" onclick="setGrade(6)">
     <div class="grade-btn-icon">
      ğŸ“‘
     </div>
     <div>
      6å¹´
     </div></button>
   </div>
   <div class="home-search-box"><input type="text" id="home-search-input" placeholder="ã•ãŒã—ãŸã„ ã‹ã‚“ã˜"> <button onclick="handleHomeSearch()">ğŸ”</button>
   </div><button class="menu-btn btn-practice" onclick="selectMode('practice')">âœï¸ ã‚Œã‚“ã—ã‚…ã†</button> <button class="menu-btn btn-test" onclick="selectMode('test')">ğŸ… ãƒ†ã‚¹ãƒˆ</button>
   <div class="reset-link"><span onclick="showResetConfirm()">ğŸ“‹ ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ</span>
   </div>
   <div class="footer-note"><strong>âš ï¸ ä¿è­·è€…ãƒ»å…ˆç”Ÿæ–¹ã¸</strong><br>
     æœ¬ã‚¢ãƒ—ãƒªã¯å­¦ç¿’æ”¯æ´ã®ãŸã‚ã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚æ¼¢å­—ã®ãƒ‡ãƒ¼ã‚¿ã¯æ—¥æœ¬ã®å­¦ç¿’æŒ‡å°è¦é ˜ã‚’å‚ç…§ã—ã¦ã„ã¾ã™ã€‚ 
    <div style="margin-top: 10px; padding: 12px; background-color: #f9f9f9; border-left: 5px solid var(--accent3); font-size:0.85rem;"><strong>ã€åˆ¤å®šã«é–¢ã™ã‚‹ã”æ³¨æ„ã€‘</strong><br>
      ãƒ»æ¨™æº–çš„ãªå­—ä½“ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€æ•™ç§‘æ›¸ã®å­—ä½“ã¨ç´°éƒ¨ãŒç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>
      ãƒ»<strong>å­¦æ ¡ã§ç¿’ã£ãŸæ›¸ãæ–¹ãŒæœ€ã‚‚æ­£ã—ã„åŸºæº–ã§ã™ã€‚</strong>ã‚¢ãƒ—ãƒªã®åˆ¤å®šã¯ã‚ãã¾ã§ç›®å®‰ã¨ã—ã¦ã”æ´»ç”¨ãã ã•ã„ã€‚
    </div>
   </div>
   <div class="app-credits-container">
    <div class="credit-warning-box">
     <div class="credit-warning-title">
      âš ï¸ ç­†é †ï¼ˆæ›¸ãé †ï¼‰ã«ã¤ã„ã¦
     </div>
     <div>
      ãƒ‡ãƒ¼ã‚¿ã®éƒ½åˆä¸Šã€ä¸€éƒ¨ã®æ¼¢å­—ã§æ¨™æº–ã¨ç•°ãªã‚‹ç­†é †ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br><strong>å­¦æ ¡ã®æ•™ç§‘æ›¸ã‚„å…ˆç”Ÿã®æŒ‡å°ã¨ç•°ãªã‚‹å ´åˆã¯ã€æ•™ç§‘æ›¸ã‚’æ­£è§£ã¨ã—ã¦ãã ã•ã„ã€‚</strong>
     </div>
    </div>
    <h3 class="credit-section-title">ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</h3>
    <ul class="credit-list">
     <li class="credit-item">
      <div class="credit-name">
       1. Hanzi Writer Data JP
      </div>
      <div class="credit-desc">
       GitHub: chanind/hanzi-writer-data-jp<br>
        Based on AnimCJK (LGPL v3). Hanzi Writer is licensed under the MIT License.
      </div></li>
     <li class="credit-item">
      <div class="credit-name">
       2. Hanzi Writer
      </div>
      <div class="credit-desc">
       JavaScript Library for Chinese/Japanese character stroke order.
      </div></li>
    </ul>
   </div><br><br>
  </div>
  <div id="list-screen" class="screen">
   <div class="header-bar"><button class="back-btn" onclick="showScreen('title-screen')">ğŸ  ãƒ›ãƒ¼ãƒ </button>
    <div style="font-weight:700; font-size:1.1rem;"><span id="list-mascot">ğŸ¥š</span> Lv.<span id="list-level">1</span>
    </div>
   </div>
   <div class="xp-container">
    <div class="xp-bar" id="xp-bar"></div>
   </div>
   <div style="text-align:right; font-size:0.85rem; margin-bottom:12px; color:#666; font-weight:600;">
    ã¤ãã®ãƒ¬ãƒ™ãƒ«ã¾ã§ ã‚ã¨ <span id="next-xp">5</span>ã“
   </div>
   <div class="search-area"><input type="text" id="search-box" placeholder="ã‹ã‚“ã˜ ã‚’ ã•ãŒã™..." oninput="filterList()">
   </div>
   <div style="margin-bottom:15px; display:flex; justify-content:center;"><span id="mode-display"></span>
   </div>
   <div id="kanji-grid" class="kanji-grid"></div>
  </div>
  <div id="practice-screen" class="screen">
   <div class="header-bar"><button class="back-btn" onclick="showScreen('list-screen')">â†© ã‚‚ã©ã‚‹</button>
    <div style="font-weight:700;"><span id="current-reading"></span>
    </div>
   </div>
   <h2 id="message-area"></h2>
   <div id="practice-area">
    <div id="character-target"></div>
   </div>
   <div class="controls"><button class="control-btn" onclick="writer.animateCharacter()">â–¶</button> <button class="control-btn" onclick="retry()">â†º</button>
   </div>
  </div>
  <div id="result-overlay" class="overlay">
   <div class="result-content">
    <div class="big-icon" id="result-icon">
     â­
    </div>
    <h2 id="result-msg">ã§ããŸï¼</h2><button class="next-btn" onclick="document.getElementById('result-overlay').classList.remove('active'); goNext();">ã¤ãã¸ âœ</button> <button class="retry-btn" onclick="document.getElementById('result-overlay').classList.remove('active'); retry();">ã‚‚ã†ã„ã£ã‹ã„</button>
   </div>
  </div>
  <div id="levelup-overlay" class="overlay">
   <div class="result-content">
    <h2 style="font-size:2.5rem;">ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ï¼</h2>
    <div class="levelup-anim">
     âœ¨
    </div>
    <div style="font-size:1.6rem; margin:15px 0; font-weight:700;">
     Lv.<span id="new-level-num">2</span> ã«ãªã£ãŸï¼
    </div>
    <div style="font-size:5rem; margin:20px 0;" id="levelup-mascot">
     ğŸ£
    </div>
    <p style="font-size:1rem; margin:15px 0;">ã™ã”ã„ãï¼<br>
     ã•ã‚‰ã«å¼·ããªã£ãŸã­ï¼</p><button class="next-btn" onclick="closeLevelUp()">ğŸ‰ ã‚„ã£ãŸãƒ¼ï¼</button>
   </div>
  </div>
  <div id="reset-confirm" class="confirm-modal">
   <div class="confirm-content">
    <h3 style="font-size:1.2rem;">ã»ã‚“ã¨ã†ã« ãƒ‡ãƒ¼ã‚¿ã‚’ ã‘ã—ã¾ã™ã‹ï¼Ÿ</h3>
    <p style="color:#666;">ãƒ¬ãƒ™ãƒ«ã‚‚ï¼‘ã« ã‚‚ã©ã‚Šã¾ã™ã€‚</p><button class="confirm-btn confirm-btn-yes" onclick="executeReset()">ã¯ã„ã€ã‘ã—ã¾ã™</button> <button class="confirm-btn confirm-btn-no" onclick="closeResetConfirm()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
   </div>
  </div>
  <script>
        // --- å…¨å­¦å¹´æ¼¢å­—ãƒ‡ãƒ¼ã‚¿ï¼ˆæ­£ç‰ˆï¼‰ ---
        const compressedKanjiData = {
Â  1: "ä¸€:ã„ã¡,ã„ã¤,ã²ã¨|å³:ã†,ã‚†ã†,ã¿ã|é›¨:ã†,ã‚ã‚,ã‚ã¾|å††:ãˆã‚“,ã¾ã‚‹|ç‹:ãŠã†|éŸ³:ãŠã‚“,ã„ã‚“,ãŠã¨,ã­|ä¸‹:ã‹,ã’,ã—ãŸ,ã—ã‚‚,ã‚‚ã¨,ã•|ç«:ã‹,ã²,ã»|èŠ±:ã‹,ã¯ãª|è²:ã‹ã„|å­¦:ãŒã,ã¾ãª|æ°—:ã,ã‘|ä¹:ãã‚…ã†,ã,ã“ã“ã®|ä¼‘:ãã‚…ã†,ã‚„ã™|ç‰:ãã‚‡ã,ãŸã¾|é‡‘:ãã‚“,ã“ã‚“,ã‹ã­,ã‹ãª|ç©º:ãã†,ãã‚‰,ã‚,ã‹ã‚‰,ã™|æœˆ:ã’ã¤,ãŒã¤,ã¤ã|çŠ¬:ã‘ã‚“,ã„ã¬|è¦‹:ã‘ã‚“,ã¿|äº”:ã”,ã„ã¤|å£:ã“ã†,ã,ãã¡|æ ¡:ã“ã†|å·¦:ã•,ã²ã ã‚Š|ä¸‰:ã•ã‚“,ã¿|å±±:ã•ã‚“,ã‚„ã¾|å­:ã—,ã™,ã“,ã­|å››:ã—,ã‚ˆ,ã‚ˆã‚“,ã‚ˆã£|ç³¸:ã—,ã„ã¨|å­—:ã˜,ã‚ã–|è€³:ã˜,ã¿ã¿|ä¸ƒ:ã—ã¡,ãªãª,ãªã®|è»Š:ã—ã‚ƒ,ãã‚‹ã¾|æ‰‹:ã—ã‚…,ãš,ã¦,ãŸ|å:ã˜ã‚…ã†,ã˜ã£,ã¨ãŠ,ã¨|å‡º:ã—ã‚…ã¤,ã™ã„,ã ,ã§|å¥³:ã˜ã‚‡,ã«ã‚‡,ã«ã‚‡ã†,ãŠã‚“ãª,ã‚|å°:ã—ã‚‡ã†,ã¡ã„,ã“,ãŠ|ä¸Š:ã˜ã‚‡ã†,ã˜ã‚‡ã†,ã†ãˆ,ã†ã‚,ã‹ã¿,ã‚,ã®ã¼|æ£®:ã—ã‚“,ã‚‚ã‚Š|äºº:ã˜ã‚“,ã«ã‚“,ã²ã¨|æ°´:ã™ã„,ã¿ãš|æ­£:ã›ã„,ã—ã‚‡ã†,ãŸã ,ã¾ã•|ç”Ÿ:ã›ã„,ã—ã‚‡ã†,ã„,ã†,ãŠ,ã¯,ã,ãªã¾|é’:ã›ã„,ã—ã‚‡ã†,ã‚ãŠ|å¤•:ã›ã,ã‚†ã†|çŸ³:ã›ã,ã—ã‚ƒã,ã“ã,ã„ã—|èµ¤:ã›ã,ã—ã‚ƒã,ã‚ã‹|åƒ:ã›ã‚“,ã¡|å·:ã›ã‚“,ã‹ã‚|å…ˆ:ã›ã‚“,ã•ã,ã¾|æ—©:ãã†,ã•ã£,ã¯ã‚„|è‰:ãã†,ãã•|è¶³:ãã,ã‚ã—,ãŸ|æ‘:ãã‚“,ã‚€ã‚‰|å¤§:ã ã„,ãŸã„,å¤§,ãŠ|ç”·:ã ã‚“,ãªã‚“,ãŠã¨ã“|ç«¹:ã¡ã,ãŸã‘|ä¸­:ã¡ã‚…ã†,ãªã‹|è™«:ã¡ã‚…ã†,ã‚€ã—|ç”º:ã¡ã‚‡ã†,ã¾ã¡|å¤©:ã¦ã‚“,ã‚ã‚,ã‚ã¾|ç”°:ã§ã‚“,ãŸ|åœŸ:ã©,ã¨,ã¤ã¡|äºŒ:ã«,ãµãŸ|æ—¥:ã«ã¡,ã˜ã¤,ã²,ã‹|å…¥:ã«ã‚…ã†,ã¯ã„,ã„|å¹´:ã­ã‚“,ã¨ã—|ç™½:ã¯ã,ã³ã‚ƒã,ã—ã‚,ã—ã‚‰|å…«:ã¯ã¡,ã‚„,ã‚„ã£,ã‚ˆã†|ç™¾:ã²ã‚ƒã,ã‚‚ã‚‚|æ–‡:ã¶ã‚“,ã‚‚ã‚“,ãµã¿|æœ¨:ã¼ã,ã‚‚ã,ã,ã“|æœ¬:ã»ã‚“,ã‚‚ã¨|å:ã‚ã„,ã¿ã‚‡ã†,ãª|ç›®:ã‚‚ã,ã¼ã,ã‚,ã¾|ç«‹:ã‚Šã¤,ã‚Šã‚…ã†,ãŸ,ã |åŠ›:ã‚Šã‚‡ã,ã‚Šã,ã¡ã‹ã‚‰|æ—:ã‚Šã‚“,ã¯ã‚„ã—|å…­:ã‚ã,ã‚€,ã‚€ã£",
Â  2: "å¼•:ã„ã‚“,ã²|ç¾½:ã†,ã¯,ã¯ã­|é›²:ã†ã‚“,ãã‚‚|åœ’:ãˆã‚“,ãã®|é :ãˆã‚“,ãŠã‚“,ã¨ãŠ|ä½•:ã‹,ãªã«,ãªã‚“|ç§‘:ã‹|å¤:ã‹,ã’,ãªã¤|å®¶:ã‹,ã‘,ã„ãˆ,ã‚„|æ­Œ:ã‹,ã†ãŸ|ç”»:ãŒ,ã‹ã|å›:ã‹ã„,ãˆ,ã¾ã‚|ä¼š:ã‹ã„,ãˆ,ã‚|æµ·:ã‹ã„,ã†ã¿|çµµ:ã‹ã„,ãˆ|å¤–:ãŒã„,ã’,ãã¨,ã»ã‹,ã¯ãš|è§’:ã‹ã,ã‹ã©,ã¤ã®|æ¥½:ãŒã,ã‚‰ã,ãŸã®|æ´»:ã‹ã¤|é–“:ã‹ã‚“,ã‘ã‚“,ã‚ã„ã ,ã¾|ä¸¸:ãŒã‚“,ã¾ã‚‹|å²©:ãŒã‚“,ã„ã‚|é¡”:ãŒã‚“,ã‹ãŠ|æ±½:ã|è¨˜:ã,ã—ã‚‹|å¸°:ã,ã‹ãˆ|å¼“:ãã‚…ã†,ã‚†ã¿|ç‰›:ãã‚…ã†,ã†ã—|é­š:ãã‚‡,ã†ãŠ,ã•ã‹ãª|äº¬:ãã‚‡ã†,ã‘ã„,ãã‚“|å¼·:ãã‚‡ã†,ã”ã†,ã¤ã‚ˆ,ã—|æ•™:ãã‚‡ã†,ãŠã—,ãŠã|è¿‘:ãã‚“,ã¡ã‹|å…„:ã‘ã„,ãã‚‡ã†,ã‚ã«|å½¢:ã‘ã„,ãã‚‡ã†,ã‹ãŸ,ã‹ãŸã¡|è¨ˆ:ã‘ã„,ã¯ã‹|å…ƒ:ã’ã‚“,ãŒã‚“,ã‚‚ã¨|è¨€:ã’ã‚“,ã”ã‚“,ã„,ã“ã¨|åŸ:ã’ã‚“,ã¯ã‚‰|æˆ¸:ã“,ã¨|å¤:ã“,ãµã‚‹|åˆ:ã”|å¾Œ:ã”,ã“ã†,ã®ã¡,ã†ã—,ã‚ã¨,ãŠã|èª:ã”,ã‹ãŸ|å·¥:ã“ã†,ã|å…¬:ã“ã†,ãŠãŠã‚„ã‘|åºƒ:ã“ã†,ã²ã‚|äº¤:ã“ã†,ã¾ã˜,ã¾,ã‹|å…‰:ã“ã†,ã²ã‹ã‚Š,ã²ã‹|è€ƒ:ã“ã†,ã‹ã‚“ãŒ|è¡Œ:ã“ã†,ãã‚‡ã†,ã„,ã„,ã‚†,ãŠã“ãª|é«˜:ã“ã†,ãŸã‹|é»„:ã“ã†,ãŠã†,ã,ã“|åˆ:ã”ã†,ãŒã£,ã‹ã£,ã‚|è°·:ã“ã,ãŸã«|å›½:ã“ã,ãã«|é»’:ã“ã,ãã‚|ä»Š:ã“ã‚“,ãã‚“,ã„ã¾|æ‰:ã•|ç´°:ã•ã„,ã»ã,ã“ã¾|ä½œ:ã•ã,ã•,ã¤ã|ç®—:ã•ã‚“|æ­¢:ã—,ã¨,ã‚„|å¸‚:ã—,ã„ã¡|çŸ¢:ã—,ã‚„|å§‰:ã—,ã‚ã­|æ€:ã—,ãŠã‚‚|ç´™:ã—,ã‹ã¿|å¯º:ã˜,ã¦ã‚‰|è‡ª:ã˜,ã—,ã¿ãšã‹|æ™‚:ã˜,ã¨ã|å®¤:ã—ã¤,ã‚€ã‚|ç¤¾:ã—ã‚ƒ,ã‚„ã—ã‚|å¼±:ã˜ã‚ƒã,ã‚ˆã‚|é¦–:ã—ã‚…,ãã³|ç§‹:ã—ã‚…ã†,ã‚ã|é€±:ã—ã‚…ã†|æ˜¥:ã—ã‚…ã‚“,ã¯ã‚‹|æ›¸:ã—ã‚‡,ã‹|å°‘:ã—ã‚‡ã†,ã™ã,ã™ã“|å ´:ã˜ã‚‡ã†,ã°|è‰²:ã—ã‚‡ã,ã—ã,ã„ã‚|é£Ÿ:ã—ã‚‡ã,ã˜ã,ãŸ,ã|å¿ƒ:ã—ã‚“,ã“ã“ã‚|æ–°:ã—ã‚“,ã‚ãŸã‚‰,ã‚ã‚‰,ã«ã„|è¦ª:ã—ã‚“,ãŠã‚„,ã—ãŸ|å›³:ãš,ã¨,ã¯ã‹|æ•°:ã™ã†,ã™,ã‹ãš,ã‹ã|è¥¿:ã›ã„,ã•ã„,ã«ã—|å£°:ã›ã„,ã—ã‚‡ã†,ã“ãˆ,ã“ã‚|æ˜Ÿ:ã›ã„,ã—ã‚‡ã†,ã»ã—|æ™´:ã›ã„,ã¯|åˆ‡:ã›ã¤,ã•ã„,ã|é›ª:ã›ã¤,ã‚†ã|èˆ¹:ã›ã‚“,ãµã­,ãµãª|ç·š:ã›ã‚“|å‰:ãœã‚“,ã¾ãˆ|çµ„:ã,ãã¿|èµ°:ãã†,ã¯ã—|å¤š:ãŸ,ãŠãŠ|å¤ª:ãŸã„,ãŸ,ãµã¨|ä½“:ãŸã„,ã¦ã„,ã‹ã‚‰ã |å°:ã ã„,ãŸã„|åœ°:ã¡,ã˜|æ± :ã¡,ã„ã‘|çŸ¥:ã¡,ã—|èŒ¶:ã¡ã‚ƒ,ã•|æ˜¼:ã¡ã‚…ã†,ã²ã‚‹|é•·:ã¡ã‚‡ã†,ãªãŒ|é³¥:ã¡ã‚‡ã†,ã¨ã‚Š|æœ:ã¡ã‚‡ã†,ã‚ã•|ç›´:ã¡ã‚‡ã,ã˜ã,ãªãŠ,ãŸã |é€š:ã¤ã†,ã¨ãŠ,ã‹ã‚ˆ|å¼Ÿ:ã¦ã„,ã ã„,ã§,ãŠã¨ã†ã¨|åº—:ã¦ã‚“,ã¿ã›|ç‚¹:ã¦ã‚“|é›»:ã§ã‚“|åˆ€:ã¨ã†,ã‹ãŸãª|å†¬:ã¨ã†,ãµã‚†|å½“:ã¨ã†,ã‚|æ±:ã¨ã†,ã²ãŒã—|ç­”:ã¨ã†,ã“ãŸ|é ­:ã¨ã†,ãš,ãƒˆ,ã‚ãŸã¾,ã‹ã—ã‚‰|åŒ:ã©ã†,ãŠãª|é“:ã©ã†,ã¨ã†,ã¿ã¡|èª­:ã©ã,ã¨ã,ã¨ã†,ã‚ˆ|å†…:ãªã„,ã ã„,ã†ã¡|å—:ãªã‚“,ãª,ã¿ãªã¿|è‚‰:ã«ã|é¦¬:ã°,ã†ã¾,ã¾|å£²:ã°ã„,ã†|è²·:ã°ã„,ã‹|éº¦:ã°ã,ã‚€ã|åŠ:ã¯ã‚“,ãªã‹|ç•ª:ã°ã‚“|çˆ¶:ãµ,ã¡ã¡|é¢¨:ãµã†,ãµ,ã‹ãœ,ã‹ã–|åˆ†:ã¶ã‚“,ãµã‚“,ã¶,ã‚|è:ã¶ã‚“,ã‚‚ã‚“,ã|ç±³:ã¹ã„,ã¾ã„,ã“ã‚|æ­©:ã»,ã¶,ãµ,ã‚ã‚‹,ã‚ã‚†|æ¯:ã¼,ã¯ã¯|æ–¹:ã»ã†,ã‹ãŸ|åŒ—:ã»ã,ããŸ|æ¯:ã¾ã„|å¦¹:ã¾ã„,ã„ã‚‚ã†ã¨|ä¸‡:ã¾ã‚“,ã°ã‚“|æ˜:ã‚ã„,ã¿ã‚‡ã†,ã‚,ã‚ã‹,ã‚ã|é³´:ã‚ã„,ãª|æ¯›:ã‚‚ã†,ã‘|é–€:ã‚‚ã‚“,ã‹ã©|å¤œ:ã‚„,ã‚ˆ,ã‚ˆã‚‹|é‡:ã‚„,ã®|å‹:ã‚†ã†,ã¨ã‚‚|ç”¨:ã‚ˆã†,ã‚‚ã¡|æ›œ:ã‚ˆã†|æ¥:ã‚‰ã„,ã,ããŸ,ã“|é‡Œ:ã‚Š,ã•ã¨|ç†:ã‚Š|è©±:ã‚,ã¯ãªã—,ã¯ãª",
Â  3: "æ‚ª:ã‚ã,ãŠ,ã‚ã‚‹|å®‰:ã‚ã‚“,ã‚„ã™|æš—:ã‚ã‚“,ãã‚‰|åŒ»:ã„|å§”:ã„,ã‚†ã |æ„:ã„|è‚²:ã„ã,ãã |å“¡:ã„ã‚“|é™¢:ã„ã‚“|é£²:ã„ã‚“,ã®|é‹:ã†ã‚“,ã¯ã“|æ³³:ãˆã„,ãŠã‚ˆ|é§…:ãˆã|å¤®:ãŠã†|æ¨ª:ãŠã†,ã‚ˆã“|å±‹:ãŠã,ã‚„|æ¸©:ãŠã‚“,ã‚ãŸãŸ|åŒ–:ã‹,ã‘,ã°|è·:ã‹,ã«|ç•Œ:ã‹ã„|é–‹:ã‹ã„,ã²ã‚‰,ã‚|éš:ã‹ã„|å¯’:ã‹ã‚“,ã•ã‚€|æ„Ÿ:ã‹ã‚“|æ¼¢:ã‹ã‚“|é¤¨:ã‹ã‚“,ã‚„ã‹ãŸ|å²¸:ãŒã‚“,ãã—|èµ·:ã,ãŠ|æœŸ:ã|å®¢:ãã‚ƒã,ã‹ã|ç©¶:ãã‚…ã†,ãã‚|æ€¥:ãã‚…ã†,ã„ã|ç´š:ãã‚…ã†|å®®:ãã‚…ã†,ãã†,ã,ã¿ã‚„|çƒ:ãã‚…ã†,ãŸã¾|å»:ãã‚‡,ã“,ã•|æ©‹:ãã‚‡ã†,ã¯ã—|æ¥­:ãã‚‡ã†,ã”ã†,ã‚ã–|æ›²:ãã‚‡ã,ã¾|å±€:ãã‚‡ã|éŠ€:ãã‚“|åŒº:ã|è‹¦:ã,ãã‚‹,ã«ãŒ|å…·:ã|å›:ãã‚“,ãã¿|ä¿‚:ã‘ã„,ã‹ã‹,ã‹ã‹ã‚Š|è»½:ã‘ã„,ã‹ã‚‹|è¡€:ã‘ã¤,ã¡|æ±º:ã‘ã¤,ã|ç ”:ã‘ã‚“,ã¨|çœŒ:ã‘ã‚“|åº«:ã“,ã|æ¹–:ã“,ã¿ãšã†ã¿|å‘:ã“ã†,ã‚€|å¹¸:ã“ã†,ã•ã„ã‚,ã•ã¡,ã—ã‚ã‚|æ¸¯:ã“ã†,ã¿ãªã¨|å·:ã”ã†|æ ¹:ã“ã‚“,ã­|ç¥­:ã•ã„,ã¾ã¤|çš¿:ã•ã‚‰|ä»•:ã—,ã˜,ã¤ã‹|æ­»:ã—|ä½¿:ã—,ã¤ã‹|å§‹:ã—,ã¯ã˜|æŒ‡:ã—,ã‚†ã³,ã•|æ­¯:ã—,ã¯|è©©:ã—|æ¬¡:ã˜,ã—,ã¤ã|äº‹:ã˜,ãš,ã“ã¨|æŒ:ã˜,ã‚‚|å¼:ã—ã|å®Ÿ:ã˜ã¤,ã¿,ã¿ã®|å†™:ã—ã‚ƒ,ã†ã¤|è€…:ã—ã‚ƒ,ã‚‚ã®|ä¸»:ã—ã‚…,ã™,ã¬ã—,ã‚ã‚‹ã˜|å®ˆ:ã—ã‚…,ã™,ã¾ã‚‚,ã‚‚ã‚Š|å–:ã—ã‚…,ã¨|é…’:ã—ã‚…,ã•ã‘,ã•ã‹|å—:ã˜ã‚…,ã†|å·:ã—ã‚…ã†,ã™|æ‹¾:ã—ã‚…ã†,ã˜ã‚…ã†,ã²ã‚|çµ‚:ã—ã‚…ã†,ãŠ|ç¿’:ã—ã‚…ã†,ãªã‚‰|é›†:ã—ã‚…ã†,ã‚ã¤|ä½:ã˜ã‚…ã†,ã™|é‡:ã˜ã‚…ã†,ã¡ã‚‡ã†,ãˆ,ãŠã‚‚,ã‹ã•|å®¿:ã—ã‚…ã,ã‚„ã©|æ‰€:ã—ã‚‡,ã¨ã“ã‚|æš‘:ã—ã‚‡,ã‚ã¤|åŠ©:ã˜ã‚‡,ãŸã™,ã™ã‘|æ˜­:ã—ã‚‡ã†|æ¶ˆ:ã—ã‚‡ã†,ã,ã‘|å•†:ã—ã‚‡ã†,ã‚ããª|ç« :ã—ã‚‡ã†|å‹:ã—ã‚‡ã†,ã‹,ã¾ã•|ä¹—:ã˜ã‚‡ã†,ã®|æ¤:ã—ã‚‡ã,ã†|ç”³:ã—ã‚“,ã‚‚ã†|èº«:ã—ã‚“,ã¿|ç¥:ã—ã‚“,ã˜ã‚“,ã‹ã¿,ã‹ã‚“|çœŸ:ã—ã‚“,ã¾|æ·±:ã—ã‚“,ãµã‹|é€²:ã—ã‚“,ã™ã™|ä¸–:ã›ã„,ã›,ã‚ˆ|æ•´:ã›ã„,ã¨ã¨ã®|æ˜”:ã›ã,ã—ã‚ƒã,ã‚€ã‹ã—|å…¨:ãœã‚“,ã¾ã£ãŸ,ã™ã¹|ç›¸:ãã†,ã—ã‚‡ã†,ã‚ã„|é€:ãã†,ãŠã|æƒ³:ãã†,ãŠã‚‚|æ¯:ãã,ã„ã|é€Ÿ:ãã,ã¯ã‚„,ã™ã¿|æ—:ãã|ä»–:ãŸ,ã»ã‹|æ‰“:ã ,ã†|å¯¾:ãŸã„,ã¤ã„|å¾…:ãŸã„,ã¾|ä»£:ã ã„,ãŸã„,ã‹,ã‚ˆ,ã—ã‚|ç¬¬:ã ã„|é¡Œ:ã ã„|ç‚­:ãŸã‚“,ã™ã¿|çŸ­:ãŸã‚“,ã¿ã˜ã‹|è«‡:ã ã‚“|ç€:ã¡ã‚ƒã,ã˜ã‚ƒã,ã,ã¤|æ³¨:ã¡ã‚…ã†,ãã|æŸ±:ã¡ã‚…ã†,ã¯ã—ã‚‰|ä¸:ã¡ã‚‡ã†,ã¦ã„|å¸³:ã¡ã‚‡ã†|èª¿:ã¡ã‚‡ã†,ã—ã‚‰,ã¨ã¨ã®|è¿½:ã¤ã„,ãŠ|å®š:ã¦ã„,ã˜ã‚‡ã†,ã•ã |åº­:ã¦ã„,ã«ã‚|ç¬›:ã¦ã,ãµãˆ|é‰„:ã¦ã¤|è»¢:ã¦ã‚“,ã“ã‚|éƒ½:ã¨,ã¤,ã¿ã‚„ã“|åº¦:ã©,ã¨,ãŸã,ãŸã³|æŠ•:ã¨ã†,ãª|è±†:ã¨ã†,ãš,ã¾ã‚|å³¶:ã¨ã†,ã—ã¾|æ¹¯:ã¨ã†,ã‚†|ç™»:ã¨ã†,ã¨,ã®ã¼|ç­‰:ã¨ã†,ã²ã¨ã—,ãªã©|å‹•:ã©ã†,ã†ã”|ç«¥:ã©ã†,ã‚ã‚‰ã¹|è¾²:ã®ã†|æ³¢:ã¯,ãªã¿|é…:ã¯ã„,ãã°|å€:ã°ã„|ç®±:ã¯ã“|ç•‘:ã¯ãŸ,ã¯ãŸã‘|ç™º:ã¯ã¤,ã»ã¤|å:ã¯ã‚“,ã»ã‚“,ãŸã‚“,ã|å‚:ã¯ã‚“,ã•ã‹|æ¿:ã¯ã‚“,ã„ãŸ|çš®:ã²,ã‹ã‚|æ‚²:ã²,ã‹ãª|ç¾:ã³,ã†ã¤ã|é¼»:ã³,ã¯ãª|ç­†:ã²ã¤,ãµã§|æ°·:ã²ã‚‡ã†,ã“ãŠã‚Š,ã²|è¡¨:ã²ã‚‡ã†,ãŠã‚‚ã¦,ã‚ã‚‰ã‚|ç§’:ã³ã‚‡ã†|ç—…:ã³ã‚‡ã†,ã‚„ã¾ã„,ã‚„|å“:ã²ã‚“,ã—ãª|è² :ãµ,ã¾,ãŠ|éƒ¨:ã¶|æœ:ãµã|ç¦:ãµã|ç‰©:ã¶ã¤,ã‚‚ã¤,ã‚‚ã®|å¹³:ã¸ã„,ã³ã‚‡ã†,ãŸã„,ã²ã‚‰|è¿”:ã¸ã‚“,ã‹ãˆ|å‹‰:ã¹ã‚“|æ”¾:ã»ã†,ã¯ãª|å‘³:ã¿,ã‚ã˜|å‘½:ã‚ã„,ã¿ã‚‡ã†,ã„ã®ã¡|é¢:ã‚ã‚“,ãŠã‚‚,ãŠã‚‚ã¦,ã»|å•:ã‚‚ã‚“,ã¨|å½¹:ã‚„ã,ãˆã|è–¬:ã‚„ã,ãã™ã‚Š|ç”±:ã‚†,ã‚ˆã—,ã‚†ã†|æ²¹:ã‚†,ã‚ã¶ã‚‰|æœ‰:ã‚†ã†,ã†,ã‚|éŠ:ã‚†ã†,ã‚†,ã‚ã|äºˆ:ã‚ˆ|ç¾Š:ã‚ˆã†,ã²ã¤ã˜|æ´‹:ã‚ˆã†|è‘‰:ã‚ˆã†,ã¯|é™½:ã‚ˆã†,ã²|æ§˜:ã‚ˆã†,ã•ã¾|è½:ã‚‰ã,ãŠ|æµ:ã‚Šã‚…ã†,ã‚‹,ãªãŒ|æ—…:ã‚Šã‚‡,ãŸã³|ä¸¡:ã‚Šã‚‡ã†|ç·‘:ã‚Šã‚‡ã,ã‚ã,ã¿ã©ã‚Š|ç¤¼:ã‚Œã„,ã‚‰ã„|åˆ—:ã‚Œã¤|ç·´:ã‚Œã‚“,ã­|è·¯:ã‚,ã˜,ã¿ã¡|å’Œ:ã‚,ã‚„ã‚,ãªã”",
Â  4: "æ„›:ã‚ã„,ã„ã¨|æ¡ˆ:ã‚ã‚“|ä»¥:ã„,ãœ|è¡£:ã„,ã“ã‚ã‚‚|ä½:ã„,ãã‚‰ã„|èŒ¨:ã„ã°,ã„ã°ã‚‰|å°:ã„ã‚“,ã—ã‚‹ã—|è‹±:ãˆã„|æ „:ãˆã„,ã•ã‹|åª›:ãˆã‚“,ã²ã‚|å¡©:ãˆã‚“,ã—ãŠ|å²¡:ã“ã†,ãŠã‹|å„„:ãŠã|åŠ :ã‹,ãã‚|æœ:ã‹,ã¯|è²¨:ã‹|èª²:ã‹|èŠ½:ãŒ,ã‚|è³€:ãŒ|æ”¹:ã‹ã„,ã‚ã‚‰ãŸ|æ¢°:ã‹ã„|å®³:ãŒã„|è¡—:ãŒã„,ã‹ã„,ã¾ã¡|å„:ã‹ã,ãŠã®ãŠã®|è¦š:ã‹ã,ãŠã¼|æ½Ÿ:ã›ã,ã‹ãŸ,ãŒãŸ|å®Œ:ã‹ã‚“|å®˜:ã‹ã‚“|ç®¡:ã‹ã‚“,ãã |é–¢:ã‹ã‚“,ã›ã,ã‹ã‹|è¦³:ã‹ã‚“,ã¿|é¡˜:ãŒã‚“,ã­ãŒ|å²:ã,ã|å¸Œ:ã|å­£:ã|æ——:ã,ã¯ãŸ|å™¨:ã,ã†ã¤ã‚|æ©Ÿ:ã,ã¯ãŸ|è­°:ã|æ±‚:ãã‚…ã†,ã‚‚ã¨|æ³£:ãã‚…ã†,ãª|çµ¦:ãã‚…ã†|æŒ™:ãã‚‡,ã‚|æ¼:ãã‚‡,ã‚Šã‚‡ã†|å…±:ãã‚‡ã†,ã¨ã‚‚|å”:ãã‚‡ã†|é¡:ãã‚‡ã†,ã‹ãŒã¿|ç«¶:ãã‚‡ã†,ã‘ã„,ã|æ¥µ:ãã‚‡ã,ã”ã,ãã‚|ç†Š:ãã¾|è¨“:ãã‚“|è»:ãã‚“|éƒ¡:ãã‚“|ç¾¤:ãã‚“,ã‚€|å¾„:ã‘ã„|æ™¯:ã‘ã„|èŠ¸:ã’ã„|æ¬ :ã‘ã¤,ã‹|çµ:ã‘ã¤,ã‚€ã™|å»º:ã‘ã‚“,ã“ã‚“,ãŸ|å¥:ã‘ã‚“,ã™ã“|é¨“:ã‘ã‚“|å›º:ã“,ã‹ãŸ|åŠŸ:ã“ã†,ã|å¥½:ã“ã†,ã™|é¦™:ã“ã†,ã‹ãŠã‚Š|å€™:ã“ã†|åº·:ã“ã†|ä½:ã•|å·®:ã•|èœ:ã•ã„,ãª|æœ€:ã•ã„,ã‚‚ã£ã¨|åŸ¼:ã•ã„,ã•ã|æ:ã–ã„|å´:ã,ã•ã|æ˜¨:ã•ã|æœ­:ã•ã¤,ãµã |åˆ·:ã•ã¤,ã™|å¯Ÿ:ã•ã¤|å‚:ã•ã‚“,ã¾ã„|ç”£:ã•ã‚“,ã†|æ•£:ã•ã‚“,ã¡|æ®‹:ã–ã‚“,ã®ã“|æ°:ã—|å¸:ã—,ã¤ã‹ã•ã©|è©¦:ã—,ã“ã“ã‚|å…:ã˜,ã“|æ²»:ã˜,ã¡,ãŠã•|æ»‹:ã˜,ã—ã’|è¾:ã˜,ã‚„|é¹¿:ã—ã‹,ã‹|å¤±:ã—ã¤,ã—ãª|å€Ÿ:ã—ã‚ƒã,ã‹|ç¨®:ã—ã‚…,ãŸã­|å‘¨:ã—ã‚…ã†,ã¾ã‚|ç¥:ã—ã‚…ã†,ã—ã‚…ã,ã„ã‚|é †:ã˜ã‚…ã‚“|åˆ:ã—ã‚‡,ã¯ã˜,ã¯ã¤,ã†ã„|æ¾:ã—ã‚‡ã†,ã¾ã¤|ç¬‘:ã—ã‚‡ã†,ã‚ã‚‰|å”±:ã—ã‚‡ã†,ã¨ãª|ç„¼:ã—ã‚‡ã†,ã‚„|ç…§:ã—ã‚‡ã†,ã¦|åŸ:ã˜ã‚‡ã†,ã—ã‚,ã|ç¸„:ã˜ã‚‡ã†,ãªã‚|è‡£:ã—ã‚“,ã˜ã‚“|ä¿¡:ã—ã‚“|äº•:ã›ã„,ã„|æˆ:ã›ã„,ã˜ã‚‡ã†,ãª|çœ:ã›ã„,ã—ã‚‡ã†,ãˆã‚Š|æ¸…:ã›ã„,ã—ã‚‡ã†,ãã‚ˆ|é™:ã›ã„,ã˜ã‚‡ã†,ã—ãš|å¸­:ã›ã|ç©:ã›ã,ã¤|æŠ˜:ã›ã¤,ãŠ|ç¯€:ã›ã¤,ãµã—|èª¬:ã›ã¤,ã¨|æµ…:ã›ã‚“,ã‚ã•|æˆ¦:ã›ã‚“,ã„ãã•|é¸:ã›ã‚“,ãˆã‚‰|ç„¶:ãœã‚“|äº‰:ãã†,ã‚ã‚‰|å€‰:ãã†,ãã‚‰|å·£:ãã†,ã™|æŸ:ãã,ãŸã°|å´:ãã,ãŒã‚|ç¶š:ãã,ã¤ã¥|å’:ãã¤|å­«:ãã‚“,ã¾ã”|å¸¯:ãŸã„,ãŠã³|éšŠ:ãŸã„|é”:ãŸã¤,ãŸã¡|å˜:ãŸã‚“|ç½®:ã¡,ãŠ|ä»²:ã¡ã‚…ã†,ãªã‹|æ²–:ã¡ã‚…ã†,ãŠã|å…†:ã¡ã‚‡ã†,ãã–|ä½:ã¦ã„,ã²ã|åº•:ã¦ã„,ãã“|çš„:ã¦ã,ã¾ã¨|å…¸:ã¦ã‚“|ä¼:ã§ã‚“,ã¤ãŸ|å¾’:ã¨|åŠª:ã©,ã¤ã¨|ç¯:ã¨ã†,ã²|åƒ:ã©ã†,ã¯ãŸã‚‰|ç‰¹:ã¨ã|å¾³:ã¨ã|æ ƒ:ã¨ã¡|å¥ˆ:ãª|æ¢¨:ã‚Š,ãªã—|ç†±:ã­ã¤,ã‚ã¤|å¿µ:ã­ã‚“|æ•—:ã¯ã„,ã‚„ã¶|æ¢…:ã°ã„,ã†ã‚|åš:ã¯ã,ã°ã|é˜ª:ã¯ã‚“,ã•ã‹|é£¯:ã¯ã‚“,ã‚ã—|é£›:ã²,ã¨|å¿…:ã²ã¤,ã‹ãªã‚‰|ç¥¨:ã²ã‚‡ã†|æ¨™:ã²ã‚‡ã†,ã—ã‚‹ã¹|ä¸:ãµ,ã¶|å¤«:ãµ,ãµã†,ãŠã£ã¨|ä»˜:ãµ,ã¤|åºœ:ãµ|é˜œ:ãµ|å¯Œ:ãµ,ãµã†,ã¨,ã¨ã¿|å‰¯:ãµã|å…µ:ã¸ã„,ã²ã‚‡ã†|åˆ¥:ã¹ã¤,ã‚ã‹|è¾º:ã¸ã‚“,ãã°|å¤‰:ã¸ã‚“,ã‹|ä¾¿:ã¹ã‚“,ãŸã‚ˆã‚Š|åŒ…:ã»ã†,ã¤ã¤|æ³•:ã»ã†|æœ›:ã¼ã†,ã®ã|ç‰§:ã¼ã,ã¾ã|æœ«:ã¾ã¤,ã™ãˆ|æº€:ã¾ã‚“,ã¿|æœª:ã¿|æ°‘:ã¿ã‚“,ãŸã¿|ç„¡:ã‚€,ãª|ç´„:ã‚„ã|å‹‡:ã‚†ã†,ã„ã•|è¦:ã‚ˆã†,ã„|é¤Š:ã‚ˆã†,ã‚„ã—ãª|æµ´:ã‚ˆã,ã‚|åˆ©:ã‚Š,ã|é™¸:ã‚Šã|è‰¯:ã‚Šã‚‡ã†,ã‚ˆ|æ–™:ã‚Šã‚‡ã†|é‡:ã‚Šã‚‡ã†,ã¯ã‹|è¼ª:ã‚Šã‚“,ã‚|é¡:ã‚‹ã„|ä»¤:ã‚Œã„|å†·:ã‚Œã„,ã¤ã‚|ä¾‹:ã‚Œã„,ãŸã¨|é€£:ã‚Œã‚“,ã¤ã‚‰|è€:ã‚ã†,ãŠ|åŠ´:ã‚ã†|éŒ²:ã‚ã",
Â  5: "åœ§:ã‚ã¤|å›²:ã„,ã‹ã“|ç§»:ã„,ã†ã¤|å› :ã„ã‚“,ã‚ˆ|æ°¸:ãˆã„,ãªãŒ|å–¶:ãˆã„,ã„ã¨ãª|è¡›:ãˆã„|æ˜“:ãˆã,ã„,ã‚„ã•|ç›Š:ãˆã,ã‚„ã|æ¶²:ãˆã|æ¼”:ãˆã‚“|å¿œ:ãŠã†,ã“ãŸ|å¾€:ãŠã†|æ¡œ:ãŠã†,ã•ãã‚‰|å¯:ã‹|ä»®:ã‹,ã‘,ã‹ã‚Š|ä¾¡:ã‹,ã‚ãŸã„|æ²³:ã‹,ã‹ã‚|é:ã‹,ã™,ã‚ã‚„ã¾|å¿«:ã‹ã„,ã“ã“ã‚ã‚ˆ|è§£:ã‹ã„,ã’,ã¨|æ ¼:ã‹ã,ã“ã†|ç¢º:ã‹ã,ãŸã—|é¡:ãŒã,ã²ãŸã„|åˆŠ:ã‹ã‚“|å¹¹:ã‹ã‚“,ã¿ã|æ…£:ã‹ã‚“,ãª|çœ¼:ãŒã‚“,ã’ã‚“,ã¾ãªã“|ç´€:ã|åŸº:ã,ã‚‚ã¨|å¯„:ã,ã‚ˆ|è¦:ã|å–œ:ã,ã‚ˆã‚ã“|æŠ€:ã,ã‚ã–|ç¾©:ã|é€†:ãã‚ƒã,ã•ã‹|ä¹…:ãã‚…ã†,ã²ã•|æ—§:ãã‚…ã†|æ•‘:ãã‚…ã†,ã™ã|å±…:ãã‚‡,ã„|è¨±:ãã‚‡,ã‚†ã‚‹|å¢ƒ:ãã‚‡ã†,ã‘ã„,ã•ã‹ã„|å‡:ãã‚“|ç¦:ãã‚“|å¥:ã|å‹:ã‘ã„,ã‹ãŸ|çµŒ:ã‘ã„,ãã‚‡ã†,ã¸,ãŸ|æ½”:ã‘ã¤,ã„ã•ãã‚ˆ|ä»¶:ã‘ã‚“|é™º:ã‘ã‚“,ã‘ã‚|æ¤œ:ã‘ã‚“|é™:ã’ã‚“,ã‹ã|ç¾:ã’ã‚“,ã‚ã‚‰ã‚|æ¸›:ã’ã‚“,ã¸|æ•…:ã“,ã‚†ãˆ,ãµã‚‹|å€‹:ã“|è­·:ã”,ã¾ã‚‚|åŠ¹:ã“ã†,ã|åš:ã“ã†,ã‚ã¤|è€•:ã“ã†,ãŸãŒã‚„|èˆª:ã“ã†|é‰±:ã“ã†|æ§‹:ã“ã†,ã‹ã¾|èˆˆ:ã“ã†,ãã‚‡ã†,ãŠã“|è¬›:ã“ã†|å‘Š:ã“ã,ã¤|æ··:ã“ã‚“,ã¾|æŸ»:ã•|å†:ã•ã„,ã•,ãµãŸãŸ|ç½:ã•ã„,ã‚ã–ã‚|å¦»:ã•ã„,ã¤ã¾|æ¡:ã•ã„,ã¨|éš›:ã•ã„,ãã‚|åœ¨:ã–ã„,ã‚|è²¡:ã–ã„,ã•ã„|ç½ª:ã–ã„,ã¤ã¿|æ®º:ã•ã¤,ã“ã‚|é›‘:ã–ã¤,ãã†|é…¸:ã•ã‚“,ã™|è³›:ã•ã‚“|å£«:ã—|æ”¯:ã—,ã•ã•|å²:ã—|å¿—:ã—,ã“ã“ã‚ã–ã—|æ:ã—,ãˆã |å¸«:ã—|è³‡:ã—|é£¼:ã—,ã‹|ç¤º:ã˜,ã—,ã—ã‚|ä¼¼:ã˜,ã«|è­˜:ã—ã|è³ª:ã—ã¤,ã—ã¡,ãŸã¡|èˆ:ã—ã‚ƒ|è¬:ã—ã‚ƒ,ã‚ã‚„ã¾|æˆ:ã˜ã‚…,ã•ãš|ä¿®:ã—ã‚…ã†,ã—ã‚…,ãŠã•|è¿°:ã˜ã‚…ã¤,ã®|è¡“:ã˜ã‚…ã¤,ã™ã¹|æº–:ã˜ã‚…ã‚“|åº:ã˜ã‚‡|æ‹›:ã—ã‚‡ã†,ã¾ã­|è¨¼:ã—ã‚‡ã†|è±¡:ã—ã‚‡ã†,ãã†|è³:ã—ã‚‡ã†|æ¡:ã˜ã‚‡ã†|çŠ¶:ã˜ã‚‡ã†|å¸¸:ã˜ã‚‡ã†,ã¤ã­,ã¨ã“|æƒ…:ã˜ã‚‡ã†,ãªã•|ç¹”:ã—ã‚‡ã,ã—ã,ãŠ|è·:ã—ã‚‡ã|åˆ¶:ã›ã„|æ€§:ã›ã„,ã—ã‚‡ã†|æ”¿:ã›ã„,ã—ã‚‡ã†,ã¾ã¤ã‚Šã”ã¨|å‹¢:ã›ã„,ã„ããŠã„|ç²¾:ã›ã„,ã—ã‚‡ã†|è£½:ã›ã„|ç¨:ãœã„|è²¬:ã›ã,ã›|ç¸¾:ã›ã|æ¥:ã›ã¤,ã¤|è¨­:ã›ã¤,ã‚‚ã†|çµ¶:ãœã¤,ãŸ|ç¥–:ã|ç´ :ã,ã™|ç·:ãã†|é€ :ãã†,ã¤ã|åƒ:ãã†|å¢—:ãã†,ã¾,ãµ|å‰‡:ãã|æ¸¬:ãã,ã¯ã‹|å±:ãã|ç‡:ãã¤,ã‚Šã¤,ã²ã|æ:ãã‚“,ãã“|è²¸:ãŸã„,ã‹|æ…‹:ãŸã„|å›£:ã ã‚“,ã¨ã‚“|æ–­:ã ã‚“,ã“ã¨ã‚,ãŸ|ç¯‰:ã¡ã,ããš|è²¯:ã¡ã‚‡|å¼µ:ã¡ã‚‡ã†,ã¯|åœ:ã¦ã„|æ:ã¦ã„,ã•|ç¨‹:ã¦ã„,ã»ã©|é©:ã¦ã|çµ±:ã¨ã†,ã™|å ‚:ã©ã†|éŠ…:ã©ã†|å°:ã©ã†,ã¿ã¡ã³|å¾—:ã¨ã,ãˆ|æ¯’:ã©ã|ç‹¬:ã©ã,ã²ã¨|ä»»:ã«ã‚“,ã¾ã‹|ç‡ƒ:ã­ã‚“,ã‚‚|èƒ½:ã®ã†|ç ´:ã¯,ã‚„ã¶|çŠ¯:ã¯ã‚“,ãŠã‹|åˆ¤:ã¯ã‚“,ã°ã‚“|ç‰ˆ:ã¯ã‚“|æ¯”:ã²,ãã‚‰|è‚¥:ã²,ã“|é:ã²|è²»:ã²,ã¤ã„|å‚™:ã³,ããª|è©•:ã²ã‚‡ã†|è²§:ã²ã‚“,ã³ã‚“,ã¾ãš|å¸ƒ:ãµ,ã¬ã®|å©¦:ãµ|æ­¦:ã¶,ã‚€|å¾©:ãµã|è¤‡:ãµã|ä»:ã¶ã¤,ã»ã¨ã‘|ç²‰:ãµã‚“,ã“,ã“ãª|ç·¨:ã¸ã‚“,ã‚|å¼:ã¹ã‚“|ä¿:ã»,ãŸã‚‚|å¢“:ã¼,ã¯ã‹|å ±:ã»ã†,ã‚€ã|è±Š:ã»ã†,ã‚†ãŸ|é˜²:ã¼ã†,ãµã›|è²¿:ã¼ã†|æš´:ã¼ã†,ã‚ã°|è„ˆ:ã¿ã‚ƒã|å‹™:ã‚€,ã¤ã¨|å¤¢:ã‚€,ã‚†ã‚|è¿·:ã‚ã„,ã¾ã‚ˆ|ç¶¿:ã‚ã‚“,ã‚ãŸ|è¼¸:ã‚†|ä½™:ã‚ˆ,ã‚ã¾|å®¹:ã‚ˆã†|ç•¥:ã‚Šã‚ƒã|ç•™:ã‚Šã‚…ã†,ã‚‹,ã¨|é ˜:ã‚Šã‚‡ã†|æ­´:ã‚Œã",
Â  6: "èƒƒ:ã„|ç•°:ã„,ã“ã¨|éº:ã„,ã‚†ã„|åŸŸ:ã„ã|å®‡:ã†|æ˜ :ãˆã„,ã†ã¤,ã¯|å»¶:ãˆã‚“,ã®|æ²¿:ãˆã‚“,ã|æ©:ãŠã‚“|æˆ‘:ãŒ,ã‚ã‚Œ,ã‚|ç°:ã‹ã„,ã¯ã„|æ‹¡:ã‹ã|é©:ã‹ã,ã‹ã‚|é–£:ã‹ã|å‰²:ã‹ã¤,ã‚|æ ª:ã‹ã¶|å¹²:ã‹ã‚“,ã»,ã²|å·»:ã‹ã‚“,ã¾|çœ‹:ã‹ã‚“|ç°¡:ã‹ã‚“|å±:ã,ã‚ã¶,ã‚ã‚„|æœº:ã,ã¤ããˆ|æ®:ã|è²´:ã,ã¨ã†ã¨,ãŸã£ã¨|ç–‘:ã,ã†ãŸãŒ|å¸:ãã‚…ã†,ã™|ä¾›:ãã‚‡ã†,ã,ã¨ã‚‚,ããª|èƒ¸:ãã‚‡ã†,ã‚€ã­,ã‚€ãª|éƒ·:ãã‚‡ã†,ã”ã†|å‹¤:ãã‚“,ã”ã‚“,ã¤ã¨|ç­‹:ãã‚“,ã™ã˜|ç³»:ã‘ã„|æ•¬:ã‘ã„,ã†ã‚„ã¾|è­¦:ã‘ã„|åŠ‡:ã’ã|æ¿€:ã’ã,ã¯ã’|ç©´:ã‘ã¤,ã‚ãª|åˆ¸:ã‘ã‚“|çµ¹:ã‘ã‚“,ãã¬|æ¨©:ã‘ã‚“,ã”ã‚“|æ†²:ã‘ã‚“|æº:ã’ã‚“,ã¿ãªã‚‚ã¨|å³:ã’ã‚“,ã”ã‚“,ãã³,ã„ã‹|å·±:ã“,ã,ãŠã®ã‚Œ|å‘¼:ã“,ã‚ˆ|èª¤:ã”,ã‚ã‚„ã¾|å:ã“ã†,ãã•ã|å­:ã“ã†|çš‡:ã“ã†,ãŠã†|ç´…:ã“ã†,ã¹ã«,ãã‚Œãªã„|é™:ã“ã†,ãŠ,ãµ|é‹¼:ã“ã†,ã¯ãŒã­|åˆ»:ã“ã,ãã–|ç©€:ã“ã|éª¨:ã“ã¤,ã»ã­|å›°:ã“ã‚“,ã“ã¾|ç ‚:ã•,ã—ã‚ƒ,ã™ãª|åº§:ã–,ã™ã‚|æ¸ˆ:ã•ã„,ã™|è£:ã•ã„,ã•ã°,ãŸ|ç­–:ã•ã|å†Š:ã•ã¤,ã•ã|èš•:ã•ã‚“,ã‹ã„ã“|è‡³:ã—,ã„ãŸ|ç§:ã—,ã‚ãŸãã—,ã‚ãŸã—|å§¿:ã—,ã™ãŒãŸ|è¦–:ã—|è©:ã—|èªŒ:ã—|ç£:ã˜|å°„:ã—ã‚ƒ,ã„|æ¨:ã—ã‚ƒ,ã™|å°º:ã—ã‚ƒã|è‹¥:ã—ã‚ƒã,ã«ã‚ƒã,ã‚ã‹|æ¨¹:ã˜ã‚…,ã|å:ã—ã‚…ã†,ãŠã•|å®—:ã—ã‚…ã†,ãã†|å°±:ã—ã‚…ã†,ã˜ã‚…,ã¤|è¡†:ã—ã‚…ã†,ã—ã‚…|å¾“:ã˜ã‚…ã†,ã—ã‚‡ã†,ã˜ã‚…,ã—ãŸãŒ|ç¸¦:ã˜ã‚…ã†,ãŸã¦|ç¸®:ã—ã‚…ã,ã¡ã¢|ç†Ÿ:ã˜ã‚…ã,ã†|ç´”:ã˜ã‚…ã‚“|å‡¦:ã—ã‚‡|ç½²:ã—ã‚‡|è«¸:ã—ã‚‡,ã‚‚ã‚|é™¤:ã˜ã‚‡,ã˜,ã®ã|æ‰¿:ã—ã‚‡ã†,ã†ã‘ãŸã¾ã‚|å°†:ã—ã‚‡ã†|å‚·:ã—ã‚‡ã†,ããš,ã„ãŸ|éšœ:ã—ã‚‡ã†,ã•ã‚|è’¸:ã˜ã‚‡ã†,ã‚€|é‡:ã—ã‚“,ã¯ã‚Š|ä»:ã˜ã‚“,ã«|å‚:ã™ã„,ãŸ|æ¨:ã™ã„,ãŠ|å¯¸:ã™ã‚“|ç››:ã›ã„,ã˜ã‚‡ã†,ã‚‚,ã•ã‹|è–:ã›ã„,ã—ã‚‡ã†|èª :ã›ã„|èˆŒ:ãœã¤,ã—ãŸ|å®£:ã›ã‚“,ã®ãŸã¾|å°‚:ã›ã‚“,ã‚‚ã£ã±|æ³‰:ã›ã‚“,ã„ãšã¿|æ´—:ã›ã‚“,ã‚ã‚‰|æŸ“:ã›ã‚“,ã,ã—|éŠ­:ã›ã‚“,ãœã«|å–„:ãœã‚“,ã‚ˆ|å¥:ãã†,ã‹ãª|çª“:ãã†,ã¾ã©|å‰µ:ãã†,ã¤ã|è£…:ãã†,ã—ã‚‡ã†,ã‚ˆããŠ|å±¤:ãã†|æ“:ãã†,ã¿ã•ãŠ,ã‚ã‚„ã¤|è”µ:ãã†,ãã‚‰|è‡“:ãã†|å­˜:ãã‚“,ãã‚“|å°Š:ãã‚“,ã¨ã†ã¨,ãŸã£ã¨|é€€:ãŸã„,ã—ã‚Šã|å®…:ãŸã|æ‹…:ãŸã‚“,ã‹ã¤,ã«ãª|æ¢:ãŸã‚“,ã•ãŒ,ã•ã|èª•:ãŸã‚“|æ®µ:ã ã‚“|æš–:ã ã‚“,ã‚ãŸãŸ|å€¤:ã¡,ã‚ãŸã„,ã­|å®™:ã¡ã‚…ã†|å¿ :ã¡ã‚…ã†|è‘—:ã¡ã‚‡,ã„ã¡ã˜ã‚‹,ã‚ã‚‰ã‚|åº:ã¡ã‚‡ã†|é ‚:ã¡ã‚‡ã†,ã„ãŸã ã|è…¸:ã¡ã‚‡ã†|æ½®:ã¡ã‚‡ã†,ã—ãŠ|è³ƒ:ã¡ã‚“|ç—›:ã¤ã†,ã„ãŸ|æ•µ:ã¦ã,ã‹ãŸã|å±•:ã¦ã‚“|è¨:ã¨ã†,ã†|å…š:ã¨ã†|ç³–:ã¨ã†|å±Š:ã¨ã©|é›£:ãªã‚“,ã‚€ãšã‹,ã‹ãŸ|ä¹³:ã«ã‚…ã†,ã¡ã¡,ã¡|èª:ã«ã‚“,ã¿ã¨|ç´:ã®ã†,ãŠã•|è„³:ã®ã†|æ´¾:ã¯|æ‹:ã¯ã„,ãŠãŒ|èƒŒ:ã¯ã„,ã›,ã›ã„,ãã‚€|è‚º:ã¯ã„|ä¿³:ã¯ã„|ç­:ã¯ã‚“|æ™©:ã°ã‚“|å¦:ã²,ã„ãª|æ‰¹:ã²|ç§˜:ã²,ã²ã‚|ä¿µ:ã²ã‚‡ã†,ãŸã‚ã‚‰|è…¹:ãµã,ã¯ã‚‰|å¥®:ãµã‚“,ãµã‚‹|ä¸¦:ã¸ã„,ãªã¿,ãªã‚‰|é™›:ã¸ã„|é–‰:ã¸ã„,ã¨,ã—|ç‰‡:ã¸ã‚“,ã‹ãŸ|è£œ:ã»,ãŠããª|æš®:ã¼,ã|å®:ã»ã†,ãŸã‹ã‚‰|è¨ª:ã»ã†,ãŠã¨ãš,ãŸãš|äº¡:ã¼ã†,ã‚‚ã†,ãª|å¿˜:ã¼ã†,ã‚ã™|æ£’:ã¼ã†|æš:ã¾ã„|å¹•:ã¾ã,ã°ã|å¯†:ã¿ã¤|ç›Ÿ:ã‚ã„|æ¨¡:ã‚‚,ã¼|è¨³:ã‚„ã,ã‚ã‘|éƒµ:ã‚†ã†|å„ª:ã‚†ã†,ã‚„ã•,ã™ã|é :ã‚ˆ,ã‚ãš|å¹¼:ã‚ˆã†,ãŠã•ãª|æ¬²:ã‚ˆã,ã»ã£,ã»|ç¿Œ:ã‚ˆã|ä¹±:ã‚‰ã‚“,ã¿ã |åµ:ã‚‰ã‚“,ãŸã¾ã”|è¦§:ã‚‰ã‚“|è£:ã‚Š,ã†ã‚‰|å¾‹:ã‚Šã¤,ã‚Šã¡|è‡¨:ã‚Šã‚“,ã®ã|æœ—:ã‚ã†,ã»ãŒ|è«–:ã‚ã‚“"
};

        // --- ãƒ‡ãƒ¼ã‚¿å±•é–‹ ---
        function parseCompressedData(grade, compressedString) {
            return compressedString.split('|').map(item => {
                const [char, reading] = item.split(':');
                return { char, reading };
            });
        }

        const allKanjiData = {};
        for (let g = 1; g <= 6; g++) {
            if (compressedKanjiData[g]) {
                allKanjiData[g] = parseCompressedData(g, compressedKanjiData[g]);
            }
        }

        // --- åŠ¹æœéŸ³ã‚·ã‚¹ãƒ†ãƒ  ---
        let audioContext;
        function playSound(type) {
            if (!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const now = audioContext.currentTime;
            
            const createOsc = (freq, type, dur, vol = 0.1) => {
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, now);
                gain.gain.setValueAtTime(vol, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + dur);
                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.start(now);
                osc.stop(now + dur);
            };

            switch(type) {
                case 'success': createOsc(800, 'sine', 0.2); break;
                case 'click': createOsc(500, 'triangle', 0.1, 0.08); break;
                case 'error': createOsc(250, 'sawtooth', 0.3, 0.1); break;
                case 'complete': 
                    createOsc(600, 'sine', 0.15); 
                    setTimeout(() => createOsc(900, 'sine', 0.25), 120);
                    break;
                case 'levelup': 
                    const melody = [523, 659, 783, 1046, 783, 1046];
                    melody.forEach((f, i) => {
                        const o = audioContext.createOscillator();
                        const g = audioContext.createGain();
                        o.type = 'square';
                        o.frequency.value = f;
                        g.gain.setValueAtTime(0.12, now + i*0.1);
                        g.gain.exponentialRampToValueAtTime(0.01, now + i*0.1 + 0.35);
                        o.connect(g);
                        g.connect(audioContext.destination);
                        o.start(now + i*0.1);
                        o.stop(now + i*0.1 + 0.35);
                    });
                    break;
            }
        }

        // --- çŠ¶æ…‹ç®¡ç† ---
        let progressPractice = JSON.parse(localStorage.getItem('kanjiMasterPractice')) || {};
        let progressTest = JSON.parse(localStorage.getItem('kanjiMasterTest')) || {};
        let writer;
        let currentChar = null;
        let currentMode = 'practice';
        let currentGrade = 1;
        
        const XP_PER_LEVEL = 5;

        // --- é€²åŒ–ãƒ»ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ  ---
        function getStats() {
            const practiceCount = Object.keys(progressPractice).length;
            const testCount = Object.keys(progressTest).length;
            const totalXP = practiceCount + (testCount*2);
            
            const level = Math.floor(totalXP / XP_PER_LEVEL) + 1;
            const currentLevelXP = totalXP % XP_PER_LEVEL;
            const nextLevelXP = XP_PER_LEVEL - currentLevelXP;
            
            return { level, totalXP, currentLevelXP, nextLevelXP };
        }

        function getMascot(level) {
            const milestones = [
                { limit: 5,   text: "ğŸ¥š ã‚¿ãƒã‚´" },
                { limit: 10,  text: "ğŸ¤ ãƒ’ãƒ¨ã‚³" },
                { limit: 15,  text: "ğŸ¥ ã‚¢ãƒ’ãƒ«" },
                { limit: 20,  text: "ğŸ¢ ã‚«ãƒ¡" },
                { limit: 25,  text: "ğŸ° ã‚¦ã‚µã‚®" },
                { limit: 30,  text: "ğŸ± ãƒã‚³" },
                { limit: 35,  text: "ğŸ¶ ã‚¤ãƒŒ" },
                { limit: 40,  text: "ğŸ» ã‚¯ãƒ" },
                { limit: 45,  text: "ğŸ¦Š ã‚­ãƒ„ãƒ" },
                { limit: 50,  text: "ğŸ¼ ãƒ‘ãƒ³ãƒ€" },
                { limit: 55,  text: "ğŸ¨ ã‚³ã‚¢ãƒ©" },
                { limit: 60,  text: "ğŸ¦ ãƒ©ã‚¤ã‚ªãƒ³" },
                { limit: 65,  text: "ğŸ¯ ãƒˆãƒ©" },
                { limit: 70,  text: "ğŸ˜ ã‚¾ã‚¦" },
                { limit: 75,  text: "ğŸ¦’ ã‚­ãƒªãƒ³" },
                { limit: 80,  text: "ğŸ¦“ ã‚·ãƒã‚¦ãƒ" },
                { limit: 85,  text: "ğŸ„ ã‚¦ã‚·" },
                { limit: 90,  text: "ğŸ· ãƒ–ã‚¿" },
                { limit: 95,  text: "ğŸ‘ ãƒ’ãƒ„ã‚¸" },
                { limit: 100, text: "ğŸ¦… ãƒ¯ã‚·" },
                { limit: 105, text: "ğŸ‰ ãƒ‰ãƒ©ã‚´ãƒ³" },
                { limit: 110, text: "ğŸ‘¹ ã‚ªãƒ‹" },
                { limit: 115, text: "ğŸ§š å¦–ç²¾" },
                { limit: 120, text: "ğŸ§™ é­”æ³•ä½¿ã„" },
                { limit: 125, text: "ğŸ¦¸ ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ’ãƒ¼ãƒ­ãƒ¼" },
                { limit: 130, text: "ğŸ‘‘ ç‹æ§˜" },
                { limit: 135, text: "ğŸ† ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³" },
                { limit: 140, text: "ğŸ’ ãƒ€ã‚¤ãƒ¤" },
                { limit: 145, text: "ğŸŒŸ ã‚¹ã‚¿ãƒ¼ã‚­ãƒ³ã‚°" },
                { limit: 150, text: "ğŸš€ ãƒ­ã‚±ãƒƒãƒˆ" },
                { limit: 155, text: "ğŸŒ åœ°çƒãƒã‚¹ã‚¿ãƒ¼" },
                { limit: 160, text: "ğŸª éŠ€æ²³ãƒã‚¹ã‚¿ãƒ¼" },
                { limit: 165, text: "âœ¨ ä¼èª¬ã®ãƒã‚¹ã‚¿ãƒ¼" },
                { limit: 170, text: "ğŸ† ç¥è³€ãƒã‚¹ã‚¿ãƒ¼" },
                { limit: 175, text: "ğŸŠ æ „å…‰ãƒã‚¹ã‚¿ãƒ¼" },
                { limit: 180, text: "ğŸ‘‘âœ¨ ã‚°ãƒ©ãƒ³ãƒ‰ãƒã‚¹ã‚¿ãƒ¼" },
                { limit: 200, text: "âˆ æ¼¢å­—ç¥" }
            ];

            for (let i = 0; i < milestones.length; i++) {
                if (level < milestones[i].limit) {
                    return milestones[i].text;
                }
            }
            return "âˆ æ¼¢å­—ã®çµ¶å¯¾è€…";
        }

        function updateUI() {
            const stats = getStats();
            const mascot = getMascot(stats.level);
            
            document.getElementById('title-mascot').innerText = mascot.split(' ')[0];
            document.getElementById('title-level').innerText = `${stats.level}`;

            document.getElementById('list-mascot').innerText = mascot.split(' ')[0];
            document.getElementById('list-level').innerText = `${stats.level}`;
            document.getElementById('next-xp').innerText = stats.nextLevelXP;
            
            const percent = (stats.currentLevelXP / XP_PER_LEVEL) * 100;
            document.getElementById('xp-bar').style.width = `${percent}%`;
        }

        function setGrade(grade) {
            playSound('click');
            currentGrade = grade;
            updateTitleGradeButtons();
        }

        function updateTitleGradeButtons() {
            document.querySelectorAll('.grade-btn').forEach(btn => {
                const gradeNum = parseInt(btn.querySelector('div:last-child').innerText);
                btn.classList.toggle('selected', gradeNum === currentGrade);
            });
        }

        function showScreen(screenId) {
            window.scrollTo(0, 0);
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            
            if (screenId === 'list-screen') {
                renderList();
            } else if (screenId === 'title-screen') {
                document.getElementById('home-search-input').value = '';
                document.getElementById('search-box').value = '';
                updateTitleGradeButtons();
                updateUI();
            }
        }

        function handleHomeSearch() {
            const query = document.getElementById('home-search-input').value;
            if (!query) return;

            document.getElementById('search-box').value = query;
            currentMode = 'practice';
            playSound('click');
            showScreen('list-screen');
            filterList();
        }

        function selectMode(mode) {
            playSound('click');
            currentMode = mode;
            document.getElementById('search-box').value = '';
            showScreen('list-screen');
        }

        function filterList() {
            renderList();
        }

        function renderList() {
            updateUI();
            
            const searchText = document.getElementById('search-box').value.trim();
            const grid = document.getElementById('kanji-grid');
            const badge = document.getElementById('mode-display');
            
            if (currentMode === 'practice') {
                badge.innerText = searchText ? `ğŸŒ ãœã‚“ãŒãã­ã‚“ãƒ»ã‚Œã‚“ã—ã‚…ã†` : `${currentGrade}ã­ã‚“ã›ã„ãƒ»âœï¸ ã‚Œã‚“ã—ã‚…ã†`;
                badge.style.background = 'linear-gradient(135deg, var(--secondary), #00E5A0)';
                badge.style.color = 'white';
            } else {
                badge.innerText = searchText ? `ğŸŒ ãœã‚“ãŒãã­ã‚“ãƒ»ãƒ†ã‚¹ãƒˆ` : `${currentGrade}ã­ã‚“ã›ã„ãƒ»ğŸ… ãƒ†ã‚¹ãƒˆ`;
                badge.style.background = 'linear-gradient(135deg, var(--primary), #FF69B4)';
                badge.style.color = 'white';
            }

            let filtered = [];

            if (searchText) {
                for (let g = 1; g <= 6; g++) {
                    if (allKanjiData[g]) {
                        const matches = allKanjiData[g].filter(item => 
                            item.char.includes(searchText) || (item.reading && item.reading.includes(searchText))
                        );
                        matches.forEach(m => m._foundGrade = g);
                        filtered = filtered.concat(matches);
                    }
                }
            } else {
                if (allKanjiData[currentGrade]) {
                    filtered = allKanjiData[currentGrade];
                    filtered.forEach(m => m._foundGrade = currentGrade);
                }
            }

            grid.innerHTML = '';
            if (filtered.length === 0) {
                grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#888;font-weight:600;padding:20px;">ã¿ã¤ã‹ã‚Šã¾ã›ã‚“...<br>(ã„ã¾ã® ãŒãã­ã‚“ ã«ã¯ ãªã„ã‹ã‚‚ï¼Ÿ)</div>';
                return;
            }

            const targetProgress = (currentMode === 'practice') ? progressPractice : progressTest;

            filtered.forEach(item => {
                const card = document.createElement('div');
                card.className = 'kanji-card';
                
                const isCleared = targetProgress[item.char];
                
                let badgeHtml = '';
                if (progressPractice[item.char]) badgeHtml += `<div class="mark-badge cleared-practice" style="display:flex;right:auto;left:-8px;"><span class="star-mark">â­</span></div>`;
                if (progressTest[item.char]) badgeHtml += `<div class="mark-badge cleared-test" style="display:flex;"><span class="crown-mark">ğŸ‘‘</span></div>`;
                
                if (isCleared) {
                    card.classList.add(currentMode === 'practice' ? 'cleared-practice' : 'cleared-test');
                }

                const gradeLabel = searchText ? `<span style="position:absolute; bottom:3px; right:6px; font-size:0.65rem; color:#999; font-weight:600;">${item._foundGrade}å¹´</span>` : '';

                card.innerHTML = `${item.char}${badgeHtml}${gradeLabel}`;
                
                card.onclick = () => { 
                    playSound('click'); 
                    if (item._foundGrade) {
                        currentGrade = item._foundGrade; 
                    }
                    startApp(item); 
                };
                grid.appendChild(card);
            });
        }

        // --- æ¼¢å­—æ›¸ãå–ã‚Šã‚¢ãƒ—ãƒªæœ¬ä½“ ---
        function startApp(item) {
            currentChar = item;
            const screen = document.getElementById('practice-screen');
            screen.classList.toggle('test-mode', currentMode === 'test');
            showScreen('practice-screen');
            
            document.getElementById('result-overlay').classList.remove('active');
            document.getElementById('levelup-overlay').classList.remove('active');
            
            const msgArea = document.getElementById('message-area');
            const readingDisplay = document.getElementById('current-reading');
            
            if (currentMode === 'test') {
                msgArea.innerText = "ã“ã® ã‹ã‚“ã˜ ã‚’ ã‹ã“ã†ï¼";
                msgArea.style.color = "#FF1493";
                readingDisplay.innerText = item.reading ? item.reading.split('/')[0] : "ï¼ˆã‚ˆã‚ãªã„ï¼‰";
            } else {
                msgArea.innerText = "ã†ã™ã„ã›ã‚“ã‚’ ãªãã‚ã†ï¼";
                msgArea.style.color = "#00D084";
                readingDisplay.innerText = `${item.char} (${item.reading || ''})`;
            }

            // ä»¥å‰ã®ãƒ©ã‚¤ã‚¿ãƒ¼ã‚’ã‚¯ãƒªã‚¢
            document.getElementById('character-target').innerHTML = '';

            writer = HanziWriter.create('character-target', item.char, {
                width: 300, height: 300, padding: 10,
                showOutline: (currentMode === 'practice'), 
                strokeAnimationSpeed: 1, 
                delayBetweenStrokes: 200,
                radicalColor: '#00D084', 
                drawingWidth: 25, 
                outlineColor: '#DDD',
                strokeColor: '#333', 
                highlightColor: '#FF6B35', 
                showHintAfterMisses: 1,
                charDataLoader: (char, onComplete) => {
                    fetch(`https://cdn.jsdelivr.net/gh/chanind/hanzi-writer-data-jp@master/data/${char}.json`)
                    .then(r => r.json()).then(onComplete)
                    .catch(() => {
                        fetch(`https://cdn.jsdelivr.net/npm/hanzi-writer-data@2.0/${char}.json`)
                        .then(r => r.json()).then(onComplete);
                    });
                }
            });
            
            writer.quiz({
                onMistake: () => { 
                    playSound('error'); 
                    document.getElementById('message-area').innerText = "ãŠã—ã„ï¼ ã“ã“ã ã‚ˆ"; 
                },
                onCorrectStroke: () => { 
                    playSound('success'); 
                    document.getElementById('message-area').innerText = "ã„ã„ãï¼ ã‚‚ã£ã¨ã‚„ã‚ã†ï¼"; 
                },
                onComplete: handleComplete
            });
        }

        function handleComplete() {
            playSound('complete');
            const msg = document.getElementById('result-msg');
            const icon = document.getElementById('result-icon');
            const isPractice = (currentMode === 'practice');
            const targetStorage = isPractice ? progressPractice : progressTest;
            const storageKey = isPractice ? 'kanjiMasterPractice' : 'kanjiMasterTest';

            const isFirstClear = !targetStorage[currentChar.char];

            targetStorage[currentChar.char] = true;
            localStorage.setItem(storageKey, JSON.stringify(targetStorage));

            if (isPractice) {
                msg.innerText = "ã§ããŸãƒ¼ï¼";
                msg.style.color = "#00D084";
                icon.innerText = "â­";
            } else {
                msg.innerText = "ã ã„ã›ã„ã‹ã„ï¼";
                msg.style.color = "#FF1493";
                icon.innerText = "ğŸ‘‘";
            }

            setTimeout(() => {
                document.getElementById('result-overlay').classList.add('active');
                if (isFirstClear) {
                    checkLevelUp();
                }
            }, 800);
        }

        function checkLevelUp() {
            const stats = getStats();
            if (stats.totalXP > 0 && stats.totalXP % XP_PER_LEVEL === 0) {
                setTimeout(() => {
                    playSound('levelup');
                    document.getElementById('result-overlay').classList.remove('active');
                    document.getElementById('levelup-overlay').classList.add('active');
                    document.getElementById('new-level-num').innerText = stats.level;
                    const mascot = getMascot(stats.level);
                    document.getElementById('levelup-mascot').innerText = mascot.split(' ')[0];
                }, 1000);
            }
        }

        function closeLevelUp() {
            document.getElementById('levelup-overlay').classList.remove('active');
            goNext();
        }

        function goNext() {
            let list = allKanjiData[currentGrade];
            
            if (currentChar._foundGrade) {
                list = allKanjiData[currentChar._foundGrade];
            }

            if (!list) { showScreen('list-screen'); return; }

            const idx = list.findIndex(k => k.char === currentChar.char);
            if (idx >= 0 && idx < list.length - 1) {
                startApp(list[idx + 1]);
            } else {
                showScreen('list-screen');
            }
        }
        function retry() { startApp(currentChar); }

        function showResetConfirm() {
            playSound('click');
            document.getElementById('reset-confirm').classList.add('active');
        }

        function closeResetConfirm() {
            playSound('click');
            document.getElementById('reset-confirm').classList.remove('active');
        }

        function executeReset() {
            playSound('click');
            localStorage.clear();
            progressPractice = {};
            progressTest = {};
            document.getElementById('reset-confirm').classList.remove('active');
            location.reload();
        }

        updateUI();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ce35e9cc627f3d2',t:'MTc3MTE0MzQ1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>